{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://blankbook/./public/js/core/placeholders.js","webpack://blankbook/./public/js/core/state.js","webpack://blankbook/./public/js/core/storyProcessor.js","webpack://blankbook/./public/js/data/storage.js","webpack://blankbook/./public/js/handlers/events.js","webpack://blankbook/./public/js/ui/forms.js","webpack://blankbook/./public/js/ui/menu.js","webpack://blankbook/./public/js/utils/domUtils.js","webpack://blankbook/./public/js/utils/typeHelpers.js","webpack://blankbook/./public/js/utils/utils.js","webpack://blankbook/webpack/bootstrap","webpack://blankbook/webpack/runtime/define property getters","webpack://blankbook/webpack/runtime/hasOwnProperty shorthand","webpack://blankbook/webpack/runtime/make namespace object","webpack://blankbook/./public/js/main.js"],"sourcesContent":["// public/js/core/placeholders.js\r\nimport state from './state.js';\r\nimport { Utils } from '../utils/utils.js';\r\nimport { TypeHelpers } from '../utils/typeHelpers.js';\r\n\r\nexport const categoryOrder = [\"Nouns\", \"Verbs\", \"Descriptors\", \"Other\"];\r\n\r\nexport const allPlaceholders = {\r\n    \"Nouns\": [\r\n        { internalType: \"NN\", display: \"Noun\", tooltip: \"Generic noun (table, apple)\", icon: \"fas fa-book\", isPrimary: true },\r\n        { internalType: \"NNP\", display: \"Proper Noun\", tooltip: \"Specific name (London, Sarah)\", icon: \"fas fa-user\", isPrimary: false },\r\n        { internalType: \"PRONOUN\", display: \"Pronoun\", tooltip: \"A pronoun\", icon: \"fas fa-user-circle\", isPrimary: true },\r\n        { internalType: \"NN_Concrete\", display: \"Concrete\", tooltip: \"Tangible object (chair, phone)\", icon: \"fas fa-cube\", isPrimary: false },\r\n        { internalType: \"NN_Person\", display: \"Person\", tooltip: \"A person (teacher, doctor)\", icon: \"fas fa-user-friends\", isPrimary: true },\r\n        { internalType: \"NN_Place\", display: \"Place\", tooltip: \"A location (park, school)\", icon: \"fas fa-map-marker-alt\", isPrimary: true },\r\n        { internalType: \"NN_Abstract\", display: \"Abstract\", tooltip: \"Intangible (happiness, freedom)\", icon: \"fas fa-cloud\", isPrimary: true },\r\n        { internalType: \"NN_Animal\", display: \"Animal\", tooltip: \"Living creature (dog, elephant)\", icon: \"fas fa-dog\", isPrimary: false },\r\n        { internalType: \"NN_BodyPart\", display: \"Body Part\", tooltip: \"Part of body (hand, knee)\", icon: \"fas fa-hand-paper\", isPrimary: false },\r\n        { internalType: \"NN_Clothing\", display: \"Clothing\", tooltip: \"Wearable (shirt, jacket)\", icon: \"fas fa-tshirt\", isPrimary: false },\r\n        { internalType: \"NN_Drink\", display: \"Drink\", tooltip: \"Beverage (juice, coffee)\", icon: \"fas fa-cocktail\", isPrimary: false },\r\n        { internalType: \"NN_Emotion\", display: \"Emotion\", tooltip: \"Feeling (joy, anger)\", icon: \"fas fa-heart\", isPrimary: false },\r\n        { internalType: \"NN_Food\", display: \"Food\", tooltip: \"Edible item (pizza, carrot)\", icon: \"fas fa-utensils\", isPrimary: false },\r\n        { internalType: \"NN_Vehicle\", display: \"Vehicle\", tooltip: \"Mode of transport (car, bicycle)\", icon: \"fas fa-car\", isPrimary: false },\r\n        { internalType: \"NN_Onomatopoeia\", display: \"Sound/Onomatopoeia\", tooltip: \"Sound word (bang, buzz)\", icon: \"fas fa-volume-up\", isPrimary: false }\r\n    ],\r\n    \"Verbs\": [\r\n        { internalType: \"VB\", display: \"Verb\", tooltip: \"Action/state (jump, write)\", icon: \"fas fa-pen\", isPrimary: true },\r\n        { internalType: \"VB_Intransitive\", display: \"Intransitive\", tooltip: \"No object (sleep, arrive)\", icon: \"fas fa-bed\", isPrimary: true },\r\n        { internalType: \"VB_Transitive\", display: \"Transitive\", tooltip: \"Takes object (kick, carry)\", icon: \"fas fa-hammer\", isPrimary: true },\r\n        { internalType: \"VB_Action\", display: \"Action\", tooltip: \"Physical action (run, climb)\", icon: \"fas fa-bolt\", isPrimary: false },\r\n        { internalType: \"VB_Stative\", display: \"State\", tooltip: \"Condition (believe, know)\", icon: \"fas fa-brain\", isPrimary: false },\r\n        { internalType: \"VB_Communication\", display: \"Communication\", tooltip: \"Speaking (say, shout)\", icon: \"fas fa-comment-dots\", isPrimary: false },\r\n        { internalType: \"VB_Movement\", display: \"Movement\", tooltip: \"Motion-based (walk, swim)\", icon: \"fas fa-walking\", isPrimary: false },\r\n        { internalType: \"VB_Onomatopoeia\", display: \"Sound/Onomatopoeia\", tooltip: \"Sound verb (meow, boom)\", icon: \"fas fa-volume-up\", isPrimary: false },\r\n        { internalType: \"MD\", display: \"Modal\", tooltip: \"Possibility (can, must)\", icon: \"fas fa-key\", isPrimary: false },\r\n        { internalType: \"VB_Linking\", display: \"Linking\", tooltip: \"Links subject (seem, become)\", icon: \"fas fa-link\", isPrimary: false },\r\n        { internalType: \"VB_Phrase\", display: \"Phrasal Verb\", tooltip: \"Multi-word verb (give up, look after)\", icon: \"fas fa-random\", isPrimary: false }\r\n    ],\r\n    \"Descriptors\": [\r\n        { internalType: \"JJ\", display: \"Adjective\", tooltip: \"Describes noun (blue, tall)\", icon: \"fas fa-ad\", isPrimary: true },\r\n        { internalType: \"RB\", display: \"Adverb\", tooltip: \"Modifies verb (quickly, often)\", icon: \"fas fa-feather-alt\", isPrimary: true },\r\n        { internalType: \"JJR\", display: \"Comparative\", tooltip: \"Comparison (faster, smaller)\", icon: \"fas fa-level-up-alt\", isPrimary: false },\r\n        { internalType: \"JJS\", display: \"Superlative\", tooltip: \"Highest degree (best, tallest)\", icon: \"fas fa-medal\", isPrimary: false },\r\n        { internalType: \"JJ_Number\", display: \"Ordered Number\", tooltip: \"A ranked number (1st, seventh)\", icon: \"fas fa-hashtag\", isPrimary: true }\r\n    ],\r\n    \"Other\": [\r\n        { internalType: \"IN\", display: \"Preposition\", tooltip: \"Shows relation (in, under)\", icon: \"fas fa-arrows-alt\", isPrimary: false },\r\n        { internalType: \"DT\", display: \"Determiner\", tooltip: \"Specifier (a, the)\", icon: \"fas fa-bookmark\", isPrimary: false },\r\n        { internalType: \"CC\", display: \"Conjunction\", tooltip: \"Joins clauses (and, or)\", icon: \"fas fa-link\", isPrimary: false },\r\n        { internalType: \"FW\", display: \"Foreign Word\", tooltip: \"Non-English (bonjour, sushi)\", icon: \"fas fa-globe\", isPrimary: false },\r\n        { internalType: \"Number\", display: \"Number\", tooltip: \"Numerical (five, twenty)\", icon: \"fas fa-hashtag\", isPrimary: true },\r\n        { internalType: \"Exclamation\", display: \"Exclamation\", tooltip: \"Interjection (wow, oops)\", icon: \"fas fa-bullhorn\", isPrimary: true }\r\n    ]\r\n};\r\n\r\nexport const VERB_TENSES = [\r\n    { value: 'VB', text: 'Base (run)' },\r\n    { value: 'VBP', text: 'Present (I walk)' },\r\n    { value: 'VBZ', text: 'Present 3rd (he leaves)' },\r\n    { value: 'VBD', text: 'Past (slept)' },\r\n    { value: 'VBG', text: 'Gerund (crying)' },\r\n    { value: 'VBN', text: 'Past Participle (eaten)' }\r\n];\r\n\r\n// Helper function to insert a node at the caret position\r\nexport const insertNodeAtCaret = (node, range) => {\r\n    if (range) {\r\n        range.deleteContents();\r\n        range.insertNode(node);\r\n        const newRange = document.createRange();\r\n        newRange.setStartAfter(node);\r\n        newRange.collapse(true);\r\n        const sel = window.getSelection();\r\n        sel.removeAllRanges();\r\n        sel.addRange(newRange);\r\n    } else {\r\n        const sel = window.getSelection();\r\n        if (sel.rangeCount) {\r\n            const r = sel.getRangeAt(0);\r\n            r.deleteContents();\r\n            r.insertNode(node);\r\n            r.setStartAfter(node);\r\n            r.collapse(true);\r\n            sel.removeAllRanges();\r\n            sel.addRange(r);\r\n        }\r\n    }\r\n};\r\n\r\n// Ensure the editor has focus\r\nexport const ensureEditorFocus = () => {\r\n    const editor = document.getElementById(\"storyText\");\r\n    const sel = window.getSelection();\r\n    if (!sel.rangeCount || !editor.contains(sel.anchorNode)) {\r\n        editor.focus();\r\n        const range = document.createRange();\r\n        range.selectNodeContents(editor);\r\n        range.collapse(false);\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n    }\r\n};\r\n\r\n// Insert a placeholder span at the caret position\r\nexport const insertPlaceholderSpan = (placeholderID, displayText, range) => {\r\n    const span = document.createElement(\"span\");\r\n    span.className = \"placeholder\";\r\n    span.setAttribute(\"data-id\", placeholderID);\r\n    span.setAttribute(\"title\", placeholderID);\r\n    span.setAttribute(\"contenteditable\", \"false\");\r\n    span.textContent = displayText;\r\n    insertNodeAtCaret(span, range);\r\n\r\n    // Append extra space if needed\r\n    if (!displayText.endsWith(\" \")) {\r\n        if (span.parentNode) {\r\n            let nextNode = span.nextSibling;\r\n            if (nextNode && nextNode.nodeType === Node.TEXT_NODE) {\r\n                if (!/^\\s/.test(nextNode.textContent)) {\r\n                    span.parentNode.insertBefore(document.createTextNode(\" \"), nextNode);\r\n                }\r\n            } else if (nextNode) {\r\n                span.parentNode.insertBefore(document.createTextNode(\" \"), nextNode);\r\n            } else {\r\n                span.parentNode.appendChild(document.createTextNode(\" \"));\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n// Duplicate an existing placeholder\r\nexport const duplicatePlaceholder = (variable) => {\r\n    state.usageTracker[variable.id] = (state.usageTracker[variable.id] || 0) + 1;\r\n    const newId = variable.id;\r\n    const editor = document.getElementById(\"storyText\");\r\n    let rangeToUse = (state.lastRange && editor.contains(state.lastRange.commonAncestorContainer))\r\n        ? state.lastRange\r\n        : (() => {\r\n            ensureEditorFocus();\r\n            const sel = window.getSelection();\r\n            return sel.rangeCount ? sel.getRangeAt(0) : null;\r\n        })();\r\n    const displayText = variable.displayOverride || variable.officialDisplay;\r\n    insertPlaceholderSpan(newId, displayText, rangeToUse);\r\n    state.lastRange = null;\r\n};\r\n\r\n// Insert a new placeholder\r\nexport const insertPlaceholder = async (internalType, displayName, isCustom) => {\r\n    const sanitized = Utils.sanitizeString(internalType);\r\n    const editor = document.getElementById(\"storyText\");\r\n    const spans = editor.querySelectorAll(\".placeholder\");\r\n    let max = 0;\r\n    spans.forEach(span => {\r\n        const id = span.getAttribute(\"data-id\");\r\n        if (id.startsWith(sanitized)) {\r\n            const match = id.match(/(\\d+)$/);\r\n            if (match) {\r\n                const num = parseInt(match[1], 10);\r\n                if (num > max) max = num;\r\n            }\r\n        }\r\n    });\r\n    const newCount = max + 1;\r\n    state.variableCounts[sanitized] = newCount;\r\n    const id = sanitized + newCount;\r\n    let rangeToUse = (state.lastRange && editor.contains(state.lastRange.commonAncestorContainer))\r\n        ? state.lastRange\r\n        : (() => {\r\n            ensureEditorFocus();\r\n            const sel = window.getSelection();\r\n            return sel.rangeCount ? sel.getRangeAt(0) : null;\r\n        })();\r\n    let selectedText = \"\";\r\n    if (rangeToUse && !rangeToUse.collapsed) {\r\n        selectedText = rangeToUse.toString().trim();\r\n    }\r\n    let displayText = selectedText || displayName;\r\n    if (!selectedText) {\r\n        const { value: temp } = await Swal.fire({\r\n            title: 'Enter temporary word',\r\n            input: 'text',\r\n            inputLabel: 'Temporary fill word for this placeholder',\r\n            inputValue: displayName,\r\n            showCancelButton: true\r\n        });\r\n        if (temp) displayText = temp;\r\n    }\r\n    insertPlaceholderSpan(id, displayText, rangeToUse);\r\n    if (!state.variables.some(v => v.id === id)) {\r\n        state.variables.push({\r\n            id,\r\n            internalType,\r\n            officialDisplay: displayName,\r\n            display: displayName,\r\n            isCustom: !!isCustom,\r\n            order: state.insertionCounter++,\r\n            displayOverride: displayText\r\n        });\r\n    }\r\n    updateVariablesList();\r\n    state.lastRange = null;\r\n    if (internalType.startsWith(\"NN\") && selectedText) {\r\n        Swal.fire({\r\n            title: 'Apply placeholder to all occurrences?',\r\n            text: `Replace all instances of \"${selectedText}\" with this placeholder?`,\r\n            icon: 'question',\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Yes, apply',\r\n            cancelButtonText: 'No'\r\n        }).then(result => {\r\n            if (result.isConfirmed) {\r\n                applyPlaceholderToAllOccurrences(selectedText, id, displayText);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\n// Apply placeholder to all occurrences of text in the story\r\nexport const applyPlaceholderToAllOccurrences = (text, id, displayText) => {\r\n    const editor = document.getElementById(\"storyText\");\r\n    const textNodes = [];\r\n    const getTextNodes = (node) => {\r\n        if (node.nodeType === Node.TEXT_NODE) {\r\n            if (node.textContent.includes(text)) {\r\n                textNodes.push(node);\r\n            }\r\n        } else if (node.childNodes && node.childNodes.length > 0) {\r\n            node.childNodes.forEach(child => {\r\n                if (!child.classList || !child.classList.contains('placeholder')) {\r\n                    getTextNodes(child);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    getTextNodes(editor);\r\n    \r\n    for (let i = textNodes.length - 1; i >= 0; i--) {\r\n        const node = textNodes[i];\r\n        const content = node.textContent;\r\n        const parts = content.split(text);\r\n        if (parts.length > 1) {\r\n            const parent = node.parentNode;\r\n            const fragment = document.createDocumentFragment();\r\n            \r\n            for (let j = 0; j < parts.length; j++) {\r\n                if (parts[j]) {\r\n                    fragment.appendChild(document.createTextNode(parts[j]));\r\n                }\r\n                if (j < parts.length - 1) {\r\n                    const span = document.createElement(\"span\");\r\n                    span.className = \"placeholder\";\r\n                    span.setAttribute(\"data-id\", id);\r\n                    span.setAttribute(\"title\", id);\r\n                    span.setAttribute(\"contenteditable\", \"false\");\r\n                    span.textContent = displayText;\r\n                    fragment.appendChild(span);\r\n                    fragment.appendChild(document.createTextNode(\" \"));\r\n                }\r\n            }\r\n            \r\n            parent.replaceChild(fragment, node);\r\n        }\r\n    }\r\n    updateVariablesFromEditor();\r\n};\r\n\r\n// Custom placeholder functions\r\nexport const addNewCustomPlaceholderWithUsage = (rawText, usage) => {\r\n    let internal;\r\n    if (usage === \"noun\") {\r\n        internal = \"NN_\" + Utils.pascalCase(rawText);\r\n    } else if (usage === \"verb\") {\r\n        internal = \"VB_\" + Utils.pascalCase(rawText);\r\n    } else {\r\n        internal = Utils.pascalCase(rawText);\r\n    }\r\n    if (!state.customPlaceholders.some(p => p.type === internal)) {\r\n        state.customPlaceholders.push({ type: internal });\r\n    }\r\n};\r\n\r\nexport const addNewCustomPlaceholder = (rawText) => {\r\n    const internal = Utils.pascalCase(rawText);\r\n    if (!state.customPlaceholders.some(p => p.type === internal)) {\r\n        state.customPlaceholders.push({ type: internal });\r\n    }\r\n};\r\n\r\nexport const insertPlaceholderFromCustom = (rawText) => {\r\n    const internal = Utils.pascalCase(rawText);\r\n    const display = Utils.naturalDisplay(internal);\r\n    insertPlaceholder(internal, display, true);\r\n};\r\n\r\n// Update the variables list display\r\nexport const updateVariablesList = () => {\r\n    const container = document.getElementById('existingPlaceholdersContainer');\r\n    container.innerHTML = '';\r\n    state.variables.sort((a, b) =>\r\n        (state.usageTracker[b.id] || 0) - (state.usageTracker[a.id] || 0) || a.order - b.order\r\n    );\r\n    state.variables.forEach(v => {\r\n        const btn = document.createElement('button');\r\n        btn.type = 'button';\r\n        btn.className = 'btn btn-outline-secondary btn-sm m-1 placeholder-item';\r\n        btn.setAttribute('data-id', v.id);\r\n        btn.textContent = v.displayOverride || v.officialDisplay;\r\n        btn.setAttribute('title', v.id);\r\n        container.appendChild(btn);\r\n    });\r\n};\r\n\r\n// Pronoun placeholder insertion\r\nexport const insertPronounPlaceholderSimple = (groupId, form, tempValue) => {\r\n    const editor = document.getElementById(\"storyText\");\r\n    ensureEditorFocus();\r\n    const sel = window.getSelection();\r\n    const range = (state.lastRange && editor.contains(state.lastRange.commonAncestorContainer))\r\n        ? state.lastRange\r\n        : (sel.rangeCount ? sel.getRangeAt(0) : null);\r\n    const groupNum = groupId.replace('PronounGroup', '');\r\n    const formAbbrevMap = { subject: 'SUB', object: 'OBJ', possAdj: 'PSA', possPron: 'PSP', reflexive: 'REF' };\r\n    const abbrev = formAbbrevMap[form] || form.toUpperCase();\r\n    const placeholderId = `PRP${groupNum}${abbrev}`;\r\n    if (!state.variables.some(v => v.id === placeholderId)) {\r\n        const displayType = `Person (${form})`;\r\n        state.variables.push({\r\n            id: placeholderId,\r\n            internalType: `PRONOUN|${groupId}|${form}`,\r\n            officialDisplay: displayType,\r\n            display: displayType,\r\n            isCustom: false,\r\n            order: state.insertionCounter++,\r\n            displayOverride: tempValue\r\n        });\r\n        updateVariablesList();\r\n    }\r\n    insertPlaceholderSpan(placeholderId, tempValue, range);\r\n    state.lastRange = null;\r\n};\r\n\r\n// Update variables from editor content\r\nexport const updateVariablesFromEditor = () => {\r\n    state.variables = [];\r\n    state.variableCounts = {};\r\n    state.insertionCounter = 0;\r\n    const editor = document.getElementById('storyText');\r\n    const placeholderElements = editor.querySelectorAll('.placeholder');\r\n    placeholderElements.forEach(el => {\r\n        const id = el.getAttribute('data-id');\r\n        const base = id.replace(/\\d+$/, '');\r\n        const numMatch = id.match(/(\\d+)$/);\r\n        const num = numMatch ? parseInt(numMatch[1], 10) : 0;\r\n        if (!state.variableCounts[base] || num > state.variableCounts[base]) {\r\n            state.variableCounts[base] = num;\r\n        }\r\n        if (!state.variables.some(v => v.id === id)) {\r\n            let variableEntry;\r\n            const custom = state.customPlaceholders.find(p => p.type === base);\r\n            if (custom) {\r\n                variableEntry = {\r\n                    id,\r\n                    internalType: custom.type,\r\n                    officialDisplay: TypeHelpers.naturalizeType(custom.type),\r\n                    display: TypeHelpers.naturalizeType(custom.type),\r\n                    isCustom: true,\r\n                    order: state.insertionCounter++,\r\n                    displayOverride: el.textContent\r\n                };\r\n            } else {\r\n                const guessed = TypeHelpers.guessTypeFromId(id);\r\n                const originalDisplay = TypeHelpers.getOriginalDisplayForType(guessed) || guessed;\r\n                variableEntry = {\r\n                    id,\r\n                    internalType: guessed,\r\n                    officialDisplay: originalDisplay,\r\n                    display: originalDisplay,\r\n                    order: state.insertionCounter++,\r\n                    displayOverride: el.textContent\r\n                };\r\n            }\r\n            state.variables.push(variableEntry);\r\n        }\r\n    });\r\n\r\n    const currentSearch = $('#placeholderSearch').val() || '';\r\n    updatePlaceholderAccordion('#placeholderAccordion', '#noResults', currentSearch);\r\n\r\n    const currentModalSearch = $('#modalPlaceholderSearch').val() || '';\r\n    updatePlaceholderAccordion('#modalPlaceholderAccordion', '#modalNoResults', currentModalSearch);\r\n\r\n    updateVariablesList();\r\n};\r\n\r\n// Convert editor content to text format with placeholders\r\nexport const generateLegacyText = () => {\r\n    const editor = document.getElementById(\"storyText\");\r\n    const traverse = (node) => {\r\n        let result = \"\";\r\n        node.childNodes.forEach(child => {\r\n            if (child.nodeType === Node.TEXT_NODE) {\r\n                result += child.textContent;\r\n            } else if (child.nodeType === Node.ELEMENT_NODE) {\r\n                if (child.tagName.toLowerCase() === \"br\") {\r\n                    result += \"\\n\";\r\n                } else if (child.classList.contains(\"placeholder\")) {\r\n                    result += \"{\" + child.getAttribute(\"data-id\") + \"}\";\r\n                } else {\r\n                    result += traverse(child);\r\n                    const tag = child.tagName.toLowerCase();\r\n                    if (tag === \"div\" || tag === \"p\") result += \"\\n\";\r\n                }\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    return traverse(editor);\r\n};\r\n\r\n// Placeholder Accordion UI Functions\r\nexport const updatePlaceholderAccordion = (accordionSelector, noResultsSelector, searchVal = '') => {\r\n    if (noResultsSelector === \"#noResults\") {\r\n        $(\"#searchQuery\").text(searchVal);\r\n        $(\"#searchQueryBtn\").text(searchVal);\r\n    } else if (noResultsSelector === \"#modalNoResults\") {\r\n        $(\"#modalSearchQuery\").text(searchVal);\r\n        $(\"#modalSearchQueryBtn\").text(searchVal);\r\n    }\r\n    $(noResultsSelector).hide();\r\n    const accordion = $(accordionSelector);\r\n    accordion.empty();\r\n    categoryOrder.forEach(categoryName => {\r\n        const placeholders = allPlaceholders[categoryName] || [];\r\n        if (placeholders.length > 0) {\r\n            const categoryCard = createPlaceholderCategoryCard(categoryName, accordionSelector, placeholders, searchVal);\r\n            accordion.append(categoryCard);\r\n        }\r\n    });\r\n    if (state.customPlaceholders.length > 0) {\r\n        const customCard = createCustomPlaceholderCategoryCard(accordionSelector, searchVal);\r\n        accordion.append(customCard);\r\n    }\r\n    if (searchVal) {\r\n        const anyShown = accordion.find('.placeholder-btn:visible').length > 0;\r\n        $(noResultsSelector).toggle(!anyShown);\r\n        accordion.find('.card-header, .show-more-toggle').hide();\r\n    } else {\r\n        accordion.find('.card-header, .show-more-toggle').show();\r\n    }\r\n};\r\n\r\nexport const createPlaceholderCategoryCard = (categoryName, accordionSelector, placeholders, searchVal) => {\r\n    const sanitizedCategoryName = categoryName.replace(/\\s+/g, '');\r\n    const card = $(`<div class='card'></div>`);\r\n    card.append(createCardHeader(categoryName, sanitizedCategoryName, accordionSelector));\r\n    const collapseDiv = $(`\r\n  <div id='${sanitizedCategoryName}Collapse' class='collapse show' aria-labelledby='${sanitizedCategoryName}Heading' data-parent='${accordionSelector}'>\r\n    <div class='card-body'><div class='list-group'></div></div>\r\n  </div>\r\n`);\r\n    const primaryItems = placeholders.filter(p => p.isPrimary);\r\n    const secondaryItems = placeholders.filter(p => !p.isPrimary);\r\n    primaryItems.forEach(p => appendPlaceholderItem(collapseDiv.find('.list-group'), p, searchVal));\r\n    if (secondaryItems.length > 0) {\r\n        const secondaryPlaceholderWrapper = createSecondaryPlaceholderWrapper(secondaryItems, searchVal);\r\n        collapseDiv.find('.list-group').append(secondaryPlaceholderWrapper);\r\n        collapseDiv.find('.list-group').append(createShowMoreToggle(sanitizedCategoryName));\r\n        updateShowMoreToggleVisibility(collapseDiv, searchVal, secondaryPlaceholderWrapper);\r\n    }\r\n    card.append(collapseDiv);\r\n    return card;\r\n};\r\n\r\nexport const createCustomPlaceholderCategoryCard = (accordionSelector, searchVal) => {\r\n    const card = $(`<div class='card'></div>`);\r\n    card.append(createCardHeader('Custom Placeholders', 'CustomPlaceholders', accordionSelector));\r\n    const collapseDiv = $(`\r\n  <div id='CustomPlaceholdersCollapse' class='collapse show' aria-labelledby='CustomPlaceholdersHeading' data-parent='${accordionSelector}'>\r\n    <div class='card-body'><div class='list-group'></div></div>\r\n  </div>\r\n`);\r\n    state.customPlaceholders.forEach(p => {\r\n        const showItem = !searchVal || p.type.toLowerCase().includes(searchVal.toLowerCase());\r\n        const item = $(`\r\n    <div class='list-group-item placeholder-btn custom-placeholder'\r\n      data-internal='${p.type}'\r\n      data-display='${p.type}'\r\n      style='display: ${showItem ? 'block' : 'none'};'>\r\n      <i class='fas fa-star'></i> ${p.type}\r\n    </div>\r\n  `);\r\n        collapseDiv.find('.list-group').append(item);\r\n    });\r\n    card.append(collapseDiv);\r\n    return card;\r\n};\r\n\r\nexport const createCardHeader = (categoryName, sanitizedCategoryName, accordionSelector) => {\r\n    return $(`\r\n  <div class='card-header' id='${sanitizedCategoryName}Heading'>\r\n    <h2 class='mb-0'>\r\n      <button class='btn btn-link btn-block text-left' type='button'\r\n        data-toggle='collapse' data-target='#${sanitizedCategoryName}Collapse'\r\n        aria-expanded='true' aria-controls='${sanitizedCategoryName}Collapse'>\r\n        ${categoryName}\r\n      </button>\r\n    </h2>\r\n  </div>\r\n`);\r\n};\r\n\r\nexport const createSecondaryPlaceholderWrapper = (secondaryItems, searchVal) => {\r\n    const hiddenWrapper = $(`<div class='secondary-placeholder-wrapper'></div>`);\r\n    secondaryItems.forEach(p => appendPlaceholderItem(hiddenWrapper, p, searchVal, true));\r\n    return hiddenWrapper;\r\n};\r\n\r\nexport const createShowMoreToggle = (sanitizedCategoryName) => {\r\n    return $(`\r\n  <div class='show-more-toggle' data-category='${sanitizedCategoryName}'>\r\n    Show More\r\n  </div>\r\n`);\r\n};\r\n\r\nexport const updateShowMoreToggleVisibility = (collapseDiv, searchVal, secondaryPlaceholderWrapper) => {\r\n    const toggleLink = collapseDiv.find('.show-more-toggle');\r\n    if (!searchVal) {\r\n        secondaryPlaceholderWrapper.find('.secondary-placeholder').hide();\r\n        toggleLink.text('Show More');\r\n    } else {\r\n        let anySecondaryVisible = secondaryPlaceholderWrapper.find('.secondary-placeholder:visible').length > 0;\r\n        toggleLink.text(anySecondaryVisible ? 'Show Less' : 'Show More');\r\n    }\r\n};\r\n\r\nexport const appendPlaceholderItem = (listGroup, placeholder, searchVal, isSecondary = false) => {\r\n    const showItem = !searchVal || placeholder.display.toLowerCase().includes(searchVal.toLowerCase());\r\n    const item = $(`\r\n  <div class='list-group-item placeholder-btn${isSecondary ? ' secondary-placeholder' : ''}'\r\n    data-internal='${placeholder.internalType}'\r\n    data-display='${placeholder.display}'\r\n    style='display: ${showItem ? 'block' : 'none'};'>\r\n    <i class='${placeholder.icon}'></i> ${placeholder.display}\r\n    <i class='fas fa-info-circle accordion-info-icon' data-tooltip=\"${placeholder.tooltip}\" style=\"font-size:0.8em; margin-left:5px;\"></i>\r\n  </div>\r\n`);\r\n    listGroup.append(item);\r\n};\r\n\r\n// Type selection modals\r\nexport const showPersonTypeSelection = (baseInternal, baseDisplay) => {\r\n    let html = `<div class='list-group'>\r\n  <button class='list-group-item list-group-item-action person-type-btn' data-type='common'>\r\n    Common (e.g., doctor)\r\n  </button>\r\n  <button class='list-group-item list-group-item-action person-type-btn' data-type='proper'>\r\n    Proper (e.g., Donald Trump)\r\n  </button>\r\n</div>`;\r\n    Swal.fire({\r\n        title: 'Select Person Type',\r\n        html,\r\n        showCancelButton: true,\r\n        showConfirmButton: false,\r\n        allowOutsideClick: false,\r\n        didOpen: () => {\r\n            const container = Swal.getHtmlContainer();\r\n            $(container).find('.person-type-btn').on('click', function () {\r\n                const selectedType = $(this).data('type'); // \"common\" or \"proper\"\r\n                let updatedBaseInternal, updatedBaseDisplay;\r\n                if (selectedType === \"proper\") {\r\n                    updatedBaseInternal = \"NNP_Person\";\r\n                    updatedBaseDisplay = \"Proper \" + baseDisplay;\r\n                } else {\r\n                    updatedBaseInternal = \"NN_Person\";\r\n                    updatedBaseDisplay = \"Common \" + baseDisplay;\r\n                }\r\n                // Close the current modal...\r\n                Swal.close();\r\n                // ...and use a small timeout to ensure it's fully closed before showing the next modal.\r\n                setTimeout(() => {\r\n                    showNounNumberSelection(updatedBaseInternal, updatedBaseDisplay);\r\n                }, 100);\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nexport const showNounNumberSelection = (baseInternal, baseDisplay) => {\r\n    let html = `<div class='list-group'>`;\r\n    ['Singular', 'Plural'].forEach(f => {\r\n        html += `<button class='list-group-item list-group-item-action noun-number-btn' data-form='${f}'>${f}</button>`;\r\n    });\r\n    html += `</div>`;\r\n    Swal.fire({\r\n        title: 'Select Number',\r\n        html,\r\n        showCancelButton: true,\r\n        showConfirmButton: false,\r\n        didOpen: () => {\r\n            const container = Swal.getHtmlContainer();\r\n            $(container).find('.noun-number-btn').on('click', async function () {\r\n                const selected = $(this).data('form');\r\n                const finalInternal = TypeHelpers.getNounFinalType(baseInternal, selected);\r\n                const finalDisplay = `${baseDisplay} (${selected})`;\r\n                if (state.isEditingPlaceholder && state.currentEditingVariable) {\r\n                    updateExistingPlaceholder(state.currentEditingVariable, finalInternal, finalDisplay);\r\n                    state.isEditingPlaceholder = false;\r\n                    state.currentEditingVariable = null;\r\n                    Swal.close();\r\n                } else {\r\n                    await insertPlaceholder(finalInternal, finalDisplay, false);\r\n                    Swal.close();\r\n                }\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nexport const showVerbTenseSelection = (baseInternal, baseDisplay) => {\r\n    let html = `<div class='list-group'>`;\r\n    VERB_TENSES.forEach(t => {\r\n        html += `<button class='list-group-item list-group-item-action verb-tense-btn' data-tense='${t.value}' data-text='${t.text}'>${t.text}</button>`;\r\n    });\r\n    html += `</div>`;\r\n    Swal.fire({\r\n        title: 'Select Verb Tense',\r\n        html,\r\n        showCancelButton: true,\r\n        showConfirmButton: false,\r\n        didOpen: () => {\r\n            const container = Swal.getHtmlContainer();\r\n            $(container).find('.verb-tense-btn').on('click', async function () {\r\n                const selectedTense = $(this).data('tense');\r\n                const tenseText = $(this).data('text');\r\n                const finalInternal = TypeHelpers.computeFinalVerbType(baseInternal, selectedTense);\r\n                const finalDisplay = `${baseDisplay} (${tenseText})`;\r\n                if (state.isEditingPlaceholder && state.currentEditingVariable) {\r\n                    updateExistingPlaceholder(state.currentEditingVariable, finalInternal, finalDisplay);\r\n                    state.isEditingPlaceholder = false;\r\n                    state.currentEditingVariable = null;\r\n                    Swal.close();\r\n                } else {\r\n                    await insertPlaceholder(finalInternal, finalDisplay, false);\r\n                    Swal.close();\r\n                }\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\n// Update existing placeholder\r\nexport const updateExistingPlaceholder = (variable, newInternalType, newDisplayName) => {\r\n    const id = variable.id;\r\n    const editor = document.getElementById(\"storyText\");\r\n    const spans = editor.querySelectorAll(`.placeholder[data-id=\"${id}\"]`);\r\n    spans.forEach(span => {\r\n        span.setAttribute(\"title\", `${id} (${newInternalType})`);\r\n    });\r\n    variable.internalType = newInternalType;\r\n    variable.officialDisplay = newDisplayName;\r\n    variable.display = newDisplayName;\r\n    updateVariablesList();\r\n};\r\n\r\n// Pronoun functions\r\nexport const pickPronounFormAndGroup = () => {\r\n    const forms = [\r\n        { value: 'subject', text: 'Subject (he, she, they)' },\r\n        { value: 'object', text: 'Object (him, her, them)' },\r\n        { value: 'possAdj', text: 'Possessive Adj. (his, her, their)' },\r\n        { value: 'possPron', text: 'Possessive Pron. (his, hers)' },\r\n        { value: 'reflexive', text: 'Reflexive (himself, herself)' }\r\n    ];\r\n    let html = `<div class='list-group mb-2'>`;\r\n    forms.forEach(f => {\r\n        html += `<button class='list-group-item list-group-item-action pronoun-form-btn' data-form='${f.value}'>${f.text}</button>`;\r\n    });\r\n    html += `</div>`;\r\n    Swal.fire({\r\n        title: 'Pick a Pronoun Form',\r\n        html,\r\n        showCancelButton: true,\r\n        showConfirmButton: false,\r\n        didOpen: () => {\r\n            const container = Swal.getHtmlContainer();\r\n            $(container).find('.pronoun-form-btn').on('click', function () {\r\n                const chosenForm = $(this).data('form');\r\n                Swal.close();\r\n                pickPronounGroup(chosenForm);\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nexport const pickPronounGroup = (form) => {\r\n    const groupKeys = Object.keys(state.pronounGroups);\r\n    let html = '';\r\n    if (groupKeys.length > 0) {\r\n        html += `<h5>Existing Pronoun Groups</h5><div class='list-group mb-2'>`;\r\n        groupKeys.forEach(g => {\r\n            html += `<button class='list-group-item list-group-item-action pronoun-group-btn' data-group='${g}'>${g}</button>`;\r\n        });\r\n        html += `</div><hr>`;\r\n    }\r\n    html += `<button class='btn btn-sm btn-outline-primary' id='createNewPronounGroupBtn'>Create New Group</button>`;\r\n    Swal.fire({\r\n        title: 'Pick a Pronoun Group',\r\n        html,\r\n        showCancelButton: true,\r\n        showConfirmButton: false,\r\n        didOpen: () => {\r\n            const container = Swal.getHtmlContainer();\r\n            $(container).find('.pronoun-group-btn').on('click', function () {\r\n                const grp = $(this).data('group');\r\n                Swal.close();\r\n                if (state.pronounGroups[grp] && state.pronounGroups[grp][form]) {\r\n                    insertPronounPlaceholderSimple(grp, form, state.pronounGroups[grp][form]);\r\n                } else {\r\n                    choosePronounTempValue(form, grp).then(tempValue => {\r\n                        state.pronounGroups[grp] = state.pronounMapping[tempValue] || \r\n                            { subject: tempValue, object: tempValue, possAdj: tempValue, possPron: tempValue, reflexive: tempValue };\r\n                        insertPronounPlaceholderSimple(grp, form, state.pronounGroups[grp][form]);\r\n                    });\r\n                }\r\n            });\r\n            $(container).find('#createNewPronounGroupBtn').on('click', function () {\r\n                state.pronounGroupCount++;\r\n                const newGroup = `PronounGroup${state.pronounGroupCount}`;\r\n                state.pronounGroups[newGroup] = {};\r\n                Swal.close();\r\n                choosePronounTempValue(form, newGroup).then(tempValue => {\r\n                    state.pronounGroups[newGroup] = state.pronounMapping[tempValue] || \r\n                        { subject: tempValue, object: tempValue, possAdj: tempValue, possPron: tempValue, reflexive: tempValue };\r\n                    insertPronounPlaceholderSimple(newGroup, form, state.pronounGroups[newGroup][form]);\r\n                });\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nexport const choosePronounTempValue = (form, groupId) => {\r\n    return Swal.fire({\r\n        title: 'Select Temporary Pronoun',\r\n        input: 'radio',\r\n        inputOptions: {\r\n            'He/Him': 'He/Him',\r\n            'She/Her': 'She/Her',\r\n            'They/Them': 'They/Them',\r\n            'Custom': 'Custom'\r\n        },\r\n        inputValidator: (value) => {\r\n            if (!value) return 'You need to choose an option!';\r\n        }\r\n    }).then(result => {\r\n        if (result.value === 'Custom') {\r\n            return Swal.fire({\r\n                title: 'Enter custom temporary pronoun',\r\n                input: 'text',\r\n                inputLabel: 'Temporary pronoun',\r\n                inputValue: form,\r\n                showCancelButton: true\r\n            }).then(res => res.value || form);\r\n        } else {\r\n            return result.value;\r\n        }\r\n    });\r\n};","// public/js/core/state.js\r\n\r\n// Create state singleton object\r\nconst state = {\r\n  variables: [],\r\n  variableCounts: {},\r\n  insertionCounter: 0,\r\n  storyText: '',\r\n  customPlaceholders: [],\r\n  fillValues: {},\r\n  pronounGroups: {},\r\n  pronounGroupCount: 0,\r\n  lastRange: null,\r\n  usageTracker: {},\r\n  placeholderInsertionInProgress: false,\r\n  storyHasUnsavedChanges: false,\r\n  fillOrder: 'alphabetical',\r\n  currentStoryId: null,\r\n  currentPlaceholderSearch: '',\r\n  currentModalPlaceholderSearch: '',\r\n  currentEditingVariable: null,\r\n  currentPlaceholderElement: null,\r\n  isEditingPlaceholder: false,\r\n};\r\n\r\n// Export the state object as default export\r\nexport default state;\r\n\r\n// Predefined pronoun mappings\r\nexport const pronounMapping = {\r\n  \"He/Him\": { subject: \"he\", object: \"him\", possAdj: \"his\", possPron: \"his\", reflexive: \"himself\" },\r\n  \"She/Her\": { subject: \"she\", object: \"her\", possAdj: \"her\", possPron: \"hers\", reflexive: \"herself\" },\r\n  \"They/Them\": { subject: \"they\", object: \"them\", possAdj: \"their\", possPron: \"theirs\", reflexive: \"themselves\" }\r\n};\r\n\r\n// Function to reset state to initial values\r\nexport function resetState() {\r\n  state.variables = [];\r\n  state.variableCounts = {};\r\n  state.insertionCounter = 0;\r\n  state.storyText = '';\r\n  state.customPlaceholders = [];\r\n  state.fillValues = {};\r\n  state.pronounGroups = {};\r\n  state.pronounGroupCount = 0;\r\n  state.lastRange = null;\r\n  state.usageTracker = {};\r\n  state.placeholderInsertionInProgress = false;\r\n  state.storyHasUnsavedChanges = false;\r\n  state.fillOrder = 'alphabetical';\r\n  state.currentStoryId = null;\r\n  state.currentPlaceholderSearch = '';\r\n  state.currentModalPlaceholderSearch = '';\r\n  state.currentEditingVariable = null;\r\n  state.currentPlaceholderElement = null;\r\n  state.isEditingPlaceholder = false;\r\n}","// public/js/core/storyProcessor.js\r\nimport state from './state.js';\r\nimport { updateVariablesFromEditor } from './placeholders.js';\r\n\r\n/**\r\n * Functions for processing and manipulating story text\r\n */\r\n\r\n// Fill in placeholders with user-provided values\r\nexport const fillPlaceholders = (templateText, variables, fillValues, pronounGroups) => {\r\n    let finalText = templateText;\r\n    \r\n    for (const variable of variables) {\r\n        const phRegex = new RegExp(`\\\\{${variable.id}\\\\}`, 'g');\r\n        if (variable.internalType.startsWith('PRONOUN|')) {\r\n            const parts = variable.internalType.split('|');\r\n            const groupId = parts[1];\r\n            const form = parts[2];\r\n            const groupObj = pronounGroups[groupId];\r\n            finalText = finalText.replace(phRegex, groupObj ? (groupObj[form] || '') : '');\r\n        } else {\r\n            const userVal = fillValues[variable.id] || '';\r\n            finalText = finalText.replace(phRegex, userVal);\r\n        }\r\n    }\r\n    \r\n    return finalText;\r\n};\r\n\r\n// Parse uploaded story text file\r\nexport const parseStoryFile = (content) => {\r\n    const titleMatch = content.match(/^Title:\\s*(.*)$/m);\r\n    const authorMatch = content.match(/^Author:\\s*(.*)$/m);\r\n    const storyStartIndex = content.indexOf('\\n\\n');\r\n    const storyContent = storyStartIndex !== -1 ? content.substring(storyStartIndex + 2) : content;\r\n    \r\n    return {\r\n        title: titleMatch ? titleMatch[1] : '',\r\n        author: authorMatch ? authorMatch[1] : '',\r\n        content: storyContent\r\n    };\r\n};\r\n\r\n// Format story for export/download\r\nexport const formatStoryForExport = (title, author, content) => {\r\n    return `Title: ${title}\\nAuthor: ${author}\\n\\n${content}`;\r\n};\r\n\r\n// Create download filename from title\r\nexport const createFilenameFromTitle = (title) => {\r\n    return title ? title.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '.txt' : 'story.txt';\r\n};\r\n\r\n// Reset story state for a new story\r\nexport const resetStoryState = () => {\r\n    // Clear DOM fields\r\n    $('#storyTitle').val('');\r\n    $('#storyAuthor').val('');\r\n    $('#storyText').html('');\r\n    $('#storyTags').val('');\r\n    \r\n    // Reset state variables\r\n    state.variables = [];\r\n    state.variableCounts = {};\r\n    state.insertionCounter = 0;\r\n    state.customPlaceholders = [];\r\n    state.fillValues = {};\r\n    state.pronounGroups = {};\r\n    state.pronounGroupCount = 0;\r\n    state.storyHasUnsavedChanges = false;\r\n    \r\n    // Show editor view\r\n    $('#editor').removeClass('d-none');\r\n    $('#inputs, #result').addClass('d-none');\r\n    \r\n    // Update UI\r\n    updateVariablesFromEditor();\r\n};\r\n\r\n// Load story data into the editor\r\nexport const loadStoryIntoEditor = (storyData) => {\r\n    $('#storyTitle').val(storyData.title || '');\r\n    $('#storyAuthor').val(storyData.author || '');\r\n    $('#storyText').html(storyData.content || '');\r\n    $('#storyTags').val(storyData.tags ? storyData.tags.join(', ') : '');\r\n    \r\n    // Reset state with the loaded story's data\r\n    state.variables = storyData.variables || [];\r\n    state.variableCounts = storyData.variableCounts || {};\r\n    state.insertionCounter = 0;\r\n    state.customPlaceholders = storyData.customPlaceholders || [];\r\n    state.fillValues = storyData.fillValues || {};\r\n    state.pronounGroups = storyData.pronounGroups || {};\r\n    state.pronounGroupCount = storyData.pronounGroupCount || 0;\r\n    state.storyHasUnsavedChanges = false;\r\n    \r\n    // Update UI based on the loaded story\r\n    updateVariablesFromEditor();\r\n};","// public/js/data/storage.js\r\nimport state from '../core/state.js';\r\n\r\nexport const Storage = {\r\n    handleAjaxError: (xhr, statusText, errorThrown, customErrorMessage) => {\r\n        let errorMessage = customErrorMessage || 'Failed to perform action';\r\n        if (xhr.status) {\r\n            errorMessage += `. Server responded with status: ${xhr.status} ${xhr.statusText}`;\r\n        } else if (statusText) {\r\n            errorMessage += `. Status text: ${statusText}`;\r\n        } else if (errorThrown) {\r\n            errorMessage += `. Error: ${errorThrown}`;\r\n        }\r\n        Swal.fire('Error', errorMessage, 'error');\r\n        console.error(\"AJAX Error:\", errorMessage, xhr);\r\n    },\r\n    \r\n    addCurrentStoryToSavedStories: () => {\r\n        const story = {\r\n            storyTitle: $('#storyTitle').val(),\r\n            storyAuthor: $('#storyAuthor').val(),\r\n            storyText: $('#storyText').html(),\r\n            variables: state.variables,\r\n            pronounGroups: state.pronounGroups,\r\n            variableCounts: state.variableCounts,\r\n            pronounGroupCount: state.pronounGroupCount,\r\n            customPlaceholders: state.customPlaceholders,\r\n            tags: $('#storyTags').val() ? $('#storyTags').val().split(',').map(s => s.trim()) : [],\r\n            savedAt: new Date().toISOString(),\r\n            password: data.password || null\r\n        };\r\n        \r\n        $.ajax({\r\n            url: '/api/savestory',\r\n            method: 'POST',\r\n            contentType: 'application/json',\r\n            data: JSON.stringify(story),\r\n            success: () => {\r\n                Swal.fire({\r\n                    toast: true,\r\n                    position: 'top-end',\r\n                    icon: 'success',\r\n                    title: 'Story saved to site!',\r\n                    showConfirmButton: false,\r\n                    timer: 1500\r\n                });\r\n            },\r\n            error: (xhr, statusText, errorThrown) => {\r\n                if (xhr.status === 409) {\r\n                    Swal.fire({\r\n                        title: 'Story exists',\r\n                        text: 'A story with this title already exists. Overwrite?',\r\n                        icon: 'warning',\r\n                        showCancelButton: true,\r\n                        confirmButtonText: 'Yes, overwrite',\r\n                        cancelButtonText: 'No'\r\n                    }).then((result) => {\r\n                        if (result.isConfirmed) {\r\n                            // Create a new story object with the overwrite flag\r\n                            let storyWithOverwrite = {\r\n                                storyTitle: data.title,\r\n                                storyAuthor: data.author,\r\n                                storyText: $('#storyText').html(),\r\n                                variables: state.variables,\r\n                                pronounGroups: state.pronounGroups,\r\n                                variableCounts: state.variableCounts,   \r\n                                pronounGroupCount: state.pronounGroupCount,\r\n                                customPlaceholders: state.customPlaceholders,\r\n                                tags: data.tags ? data.tags.split(',').map(s => s.trim()) : [],\r\n                                savedAt: new Date().toISOString(),\r\n                                password: data.password || null,\r\n                                overwrite: true  // Add the overwrite flag\r\n                            };\r\n\r\n                            $.ajax({\r\n                                url: '/api/savestory',\r\n                                method: 'POST',\r\n                                contentType: 'application/json',\r\n                                data: JSON.stringify(storyWithOverwrite),\r\n                                success: () => {\r\n                                    Swal.fire({\r\n                                        toast: true,\r\n                                        position: 'top-end',\r\n                                        icon: 'success',\r\n                                        title: 'Story overwritten!',\r\n                                        showConfirmButton: false,\r\n                                        timer: 1500\r\n                                    });\r\n                                },\r\n                                error: (xhrOverwrite, statusTextOverwrite, errorThrownOverwrite) => {\r\n                                    Storage.handleAjaxError(xhrOverwrite, statusTextOverwrite, errorThrownOverwrite, 'Failed to overwrite story');\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                } else {\r\n                    Storage.handleAjaxError(xhr, statusText, errorThrown, 'Failed to save story');\r\n                }\r\n            }\r\n        });\r\n    },\r\n    \r\n    addCompletedStoryToSavedStories: () => {\r\n        const story = {\r\n            storyTitle: $('#displayTitle').text(),\r\n            storyAuthor: $('#displayAuthor').text(),\r\n            storyText: state.storyText,\r\n            variables: state.variables,\r\n            pronounGroups: state.pronounGroups,\r\n            variableCounts: state.variableCounts,\r\n            pronounGroupCount: state.pronounGroupCount,\r\n            customPlaceholders: state.customPlaceholders,\r\n            tags: $('#displayTags').text() ? $('#displayTags').text().split(',').map(s => s.trim()) : [],\r\n            savedAt: new Date().toISOString(),\r\n            password: data.password || null\r\n        };\r\n        \r\n        $.ajax({\r\n            url: '/api/savestory',\r\n            method: 'POST',\r\n            contentType: 'application/json',\r\n            data: JSON.stringify(story),\r\n            success: () => {\r\n                Swal.fire({\r\n                    toast: true,\r\n                    position: 'top-end',\r\n                    icon: 'success',\r\n                    title: 'Completed story saved to site!',\r\n                    showConfirmButton: false,\r\n                    timer: 1500\r\n                });\r\n            },\r\n            error: (xhr, statusText, errorThrown) => {\r\n                if (xhr.status === 409) {\r\n                    Swal.fire({\r\n                        title: 'Story exists',\r\n                        text: 'A story with this title already exists. Overwrite?',\r\n                        icon: 'warning',\r\n                        showCancelButton: true,\r\n                        confirmButtonText: 'Yes, overwrite',\r\n                        cancelButtonText: 'No'\r\n                    }).then((result) => {\r\n                        if (result.isConfirmed) {\r\n                            story.overwrite = true;\r\n                            $.ajax({\r\n                                url: '/api/savestory',\r\n                                method: 'POST',\r\n                                contentType: 'application/json',\r\n                                data: JSON.stringify(story),\r\n                                success: () => {\r\n                                    Swal.fire({\r\n                                        toast: true,\r\n                                        position: 'top-end',\r\n                                        icon: 'success',\r\n                                        title: 'Completed story overwritten!',\r\n                                        showConfirmButton: false,\r\n                                        timer: 1500\r\n                                    });\r\n                                },\r\n                                error: (xhrOverwrite, statusTextOverwrite, errorThrownOverwrite) => {\r\n                                    Storage.handleAjaxError(xhrOverwrite, statusTextOverwrite, errorThrownOverwrite, 'Failed to overwrite completed story');\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                } else {\r\n                    Storage.handleAjaxError(xhr, statusText, errorThrown, 'Failed to save completed story');\r\n                }\r\n            }\r\n        });\r\n    },\r\n    \r\n    loadSavedStoriesList: () => {\r\n        const tag = $('#filterTag').val();\r\n        const sort = $('#sortOption').val();\r\n        $.ajax({\r\n            url: `/api/getstories?tag=${encodeURIComponent(tag || '')}&sort=${encodeURIComponent(sort || 'date_desc')}`,\r\n            method: 'GET',\r\n            success: (stories) => {\r\n                // Store the fetched stories globally for later reference\r\n                window.savedStories = stories;\r\n                const $listContainer = $('#savedStoriesList').empty();\r\n                if (!stories.length) {\r\n                    $listContainer.append('<p>No stories saved yet.</p>');\r\n                    return;\r\n                }\r\n                stories.forEach((story, index) => {\r\n                    const dateObj = new Date(story.savedAt);\r\n                    const dateStr = dateObj.toLocaleDateString() + \" \" + dateObj.toLocaleTimeString();\r\n                    const tags = story.tags && story.tags.length ? story.tags.join(', ') : 'No tags';\r\n                    const ratingDisplay = story.ratingCount ? `Rating: ${story.rating.toFixed(1)} (${story.ratingCount} votes)` : 'No ratings';\r\n                    const lockIndicator = story.locked ? `<i class=\"fas fa-lock\" title=\"Password Protected\"></i> ` : '';\r\n                    const item = $(`\r\n                      <div class=\"list-group-item p-2\">\r\n                        <div class=\"d-flex justify-content-between align-items-center\">\r\n                          <div>\r\n                            <strong>${lockIndicator}${story.storyTitle || 'Untitled'}</strong><br>\r\n                            <small>${story.storyAuthor || 'Unknown'} | ${dateStr}</small><br>\r\n                            <small>${tags} | ${ratingDisplay}</small>\r\n                          </div>\r\n                          <div>\r\n                            <button class=\"btn btn-sm btn-secondary editSavedStoryBtn\" data-index=\"${index}\" aria-label=\"Edit Story\">\r\n                              <i class=\"fas fa-edit\"></i>\r\n                            </button>\r\n                            <button class=\"btn btn-sm btn-success loadSavedStoryBtn\" data-index=\"${index}\" aria-label=\"Play Story\">\r\n                              <i class=\"fas fa-play\"></i>\r\n                            </button>\r\n                            <button class=\"btn btn-sm btn-danger deleteSavedStoryBtn\" data-title=\"${story.storyTitle}\" aria-label=\"Delete Story\">\r\n                              <i class=\"fas fa-trash-alt\"></i>\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    `);\r\n                    $listContainer.append(item);\r\n                });\r\n            },\r\n            error: (xhr, statusText, errorThrown) => {\r\n                Storage.handleAjaxError(xhr, statusText, errorThrown, 'Failed to load saved stories list');\r\n            }\r\n        });\r\n    },\r\n    \r\n    createSavedStoryListItem: (story, index, dateStr) => {\r\n        return $(`\r\n            <div class=\"list-group-item p-2\">\r\n              <div class=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <strong>${story.storyTitle || 'Untitled'}</strong><br>\r\n                  <small>${story.storyAuthor || 'Unknown'} | ${dateStr}</small>\r\n                </div>\r\n                <div>\r\n                  <button class=\"btn btn-sm btn-secondary editSavedStoryBtn\" data-index=\"${index}\" aria-label=\"Edit Story\">\r\n                    <i class=\"fas fa-edit\"></i>\r\n                  </button>\r\n                  <button class=\"btn btn-sm btn-success loadSavedStoryBtn\" data-index=\"${index}\" aria-label=\"Play Story\">\r\n                    <i class=\"fas fa-play\"></i>\r\n                  </button>\r\n                  <button class=\"btn btn-sm btn-danger deleteSavedStoryBtn\" data-title=\"${story.storyTitle}\" aria-label=\"Delete Story\">\r\n                    <i class=\"fas fa-trash-alt\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n        `);\r\n    },\r\n    \r\n    loadSavedStory: (index, mode = \"edit\") => {\r\n        const stories = window.savedStories || [];\r\n        const story = stories[index];\r\n        if (!story) {\r\n            Swal.fire('Error', 'Story not found.', 'error');\r\n            return;\r\n        }\r\n        // NEW: If the story is locked, prompt for the password.\r\n        if (story.locked) {\r\n            Swal.fire({\r\n                title: 'Enter Password',\r\n                input: 'password',\r\n                inputPlaceholder: 'Password',\r\n                showCancelButton: true,\r\n                inputAttributes: { autocapitalize: 'off', autocorrect: 'off' }\r\n            }).then(result => {\r\n                if (result.value) {\r\n                    $.ajax({\r\n                        url: '/api/unlockstory',\r\n                        method: 'POST',\r\n                        contentType: 'application/json',\r\n                        data: JSON.stringify({ storyId: story._id, password: result.value }),\r\n                        success: (unlockedStory) => {\r\n                            Storage.populateEditorWithStory(unlockedStory, mode);\r\n                            state.currentStoryId = unlockedStory._id || null;\r\n                            $('#displayStoryId').text(state.currentStoryId);\r\n                            Swal.fire({ toast: true, position: 'top-end', icon: 'success', title: 'Story loaded!', showConfirmButton: false, timer: 1500 });\r\n                        },\r\n                        error: (xhr, statusText, errorThrown) => {\r\n                            Storage.handleAjaxError(xhr, statusText, errorThrown, 'Incorrect password or failed to unlock story');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        } else {\r\n            Storage.populateEditorWithStory(story, mode);\r\n            state.currentStoryId = story._id || null;\r\n            $('#displayStoryId').text(state.currentStoryId);\r\n            Swal.fire({ toast: true, position: 'top-end', icon: 'success', title: 'Story loaded!', showConfirmButton: false, timer: 1500 });\r\n        }\r\n    },\r\n\r\n    populateEditorWithStory: (story, mode) => {\r\n        $('#storyTitle').val(story.storyTitle);\r\n        $('#storyAuthor').val(story.storyAuthor);\r\n        $('#storyText').html(decodeHTMLEntities(story.storyText));\r\n        // NEW: Populate tags input if editing a story.\r\n        if (story.tags && story.tags.length) {\r\n            $('#storyTags').val(story.tags.join(', '));\r\n        }\r\n        // Also store rating info in a display area (if desired)\r\n        if (mode === \"play\" && story.ratingCount) {\r\n            $('#ratingSection').show();\r\n        } else {\r\n            $('#ratingSection').hide();\r\n        }\r\n        state.variables = [];\r\n        state.variableCounts = {};\r\n        state.insertionCounter = 0;\r\n        state.fillValues = story.fillValues || {};\r\n        state.pronounGroups = story.pronounGroups || {};\r\n        state.pronounGroupCount = story.pronounGroupCount || 0;\r\n        state.customPlaceholders = story.customPlaceholders || [];\r\n        updateVariablesFromEditor();\r\n        if (mode === \"edit\") {\r\n            $('#editor').removeClass('d-none');\r\n            $('#inputs, #result').addClass('d-none');\r\n        } else if (mode === \"play\") {\r\n            buildFillForm();\r\n            $('#inputs').removeClass('d-none');\r\n            $('#editor, #result').addClass('d-none');\r\n        }\r\n    },\r\n    \r\n    deleteSavedStory: (title) => {\r\n        $.ajax({\r\n            url: '/api/deletestory',\r\n            method: 'DELETE',\r\n            contentType: 'application/json',\r\n            data: JSON.stringify({ storyTitle: title }),\r\n            success: () => {\r\n                Swal.fire({\r\n                    toast: true,\r\n                    position: 'top-end',\r\n                    icon: 'success',\r\n                    title: 'Story deleted!',\r\n                    showConfirmButton: false,\r\n                    timer: 1500\r\n                });\r\n                Storage.loadSavedStoriesList();\r\n            },\r\n            error: (xhr, statusText, errorThrown) => {\r\n                Storage.handleAjaxError(xhr, statusText, errorThrown, 'Failed to delete story');\r\n            }\r\n        });\r\n    }\r\n};","// public/js/handlers/events.js\r\nimport state from '../core/state.js';\r\nimport { Storage } from '../data/storage.js';\r\nimport { Utils } from '../utils/utils.js';\r\nimport { TypeHelpers } from '../utils/typeHelpers.js';\r\nimport { \r\n    updatePlaceholderAccordion, \r\n    updateVariablesFromEditor, \r\n    generateLegacyText,\r\n    addNewCustomPlaceholderWithUsage,\r\n    showNounNumberSelection,\r\n    showVerbTenseSelection,\r\n    insertPlaceholderFromCustom,\r\n    addNewCustomPlaceholder,\r\n    pickPronounFormAndGroup,\r\n    updateVariablesList,\r\n    duplicatePlaceholder\r\n} from '../core/placeholders.js';\r\nimport { buildFillForm, validateInputForm } from '../ui/forms.js';\r\nimport { \r\n    fillPlaceholders, \r\n    parseStoryFile, \r\n    formatStoryForExport, \r\n    createFilenameFromTitle,\r\n    resetStoryState\r\n} from '../core/storyProcessor.js';\r\nimport * as domUtils from '../utils/domUtils.js';\r\n\r\n// Attach all event handlers\r\nexport const initEvents = () => {\r\n\r\n    \r\n$(document).on('click', '.fill-info-icon', (e) => {\r\n    e.stopPropagation();\r\n    const type = $(e.currentTarget).data('type');\r\n    const tooltip = TypeHelpers.getTooltipForType(type);\r\n    domUtils.showToast(tooltip, 'info');\r\n  });\r\n  \r\n  // Also ensure the show-more-toggle event is properly handled\r\n  $(document).on('click', '.show-more-toggle', function () {\r\n    const parentList = $(this).closest('.list-group');\r\n    const hiddenItems = parentList.find('.secondary-placeholder-wrapper .secondary-placeholder');\r\n    const link = $(this);\r\n    link.text(link.text() === 'Show More' ? 'Show Less' : 'Show More');\r\n    hiddenItems.toggle();\r\n  });\r\n  \r\n  // Add copy to clipboard handler if not already included\r\n  $('#copyStory').on('click', () => {\r\n    const finalText = $('#finalStory').text();\r\n    domUtils.copyTextToClipboard(finalText);\r\n  });\r\n    // Selection changes\r\n    document.addEventListener('selectionchange', () => {\r\n        const editor = document.getElementById(\"storyText\");\r\n        const sel = window.getSelection();\r\n        if (sel.rangeCount > 0 && editor.contains(sel.anchorNode)) {\r\n            state.lastRange = sel.getRangeAt(0);\r\n        }\r\n    });\r\n\r\n    // Attach search handlers with a reduced debounce delay (50ms)\r\n    $('#placeholderSearch').on('input', Utils.debounce(function () {\r\n        const searchVal = $(this).val();\r\n        updatePlaceholderAccordion('#placeholderAccordion', '#noResults', searchVal);\r\n        $('#addCustomPlaceholderBtn').text('Add \"' + searchVal + '\"');\r\n    }, 50));\r\n\r\n    $('#modalPlaceholderSearch').on('input', Utils.debounce(function () {\r\n        const searchVal = $(this).val();\r\n        updatePlaceholderAccordion('#modalPlaceholderAccordion', '#modalNoResults', searchVal);\r\n        $('#modalAddCustomPlaceholderBtn').text('Add \"' + searchVal + '\"');\r\n    }, 50));\r\n\r\n    // Init accordions\r\n    updatePlaceholderAccordion('#placeholderAccordion', '#noResults', state.currentPlaceholderSearch);\r\n    updatePlaceholderAccordion('#modalPlaceholderAccordion', '#modalNoResults', state.currentModalPlaceholderSearch);\r\n    \r\n    // Filter tag input handler\r\n    $('#filterTag').on('input', Utils.debounce(() => {\r\n        Storage.loadSavedStoriesList();\r\n    }, 300));\r\n\r\n    // Sort option change handler\r\n    $('#sortOption').on('change', () => {\r\n        Storage.loadSavedStoriesList();\r\n    });\r\n\r\n    // Alphabetical/random order buttons\r\n    $('#alphabeticalOrderBtn').on('click', function () {\r\n        state.fillOrder = 'alphabetical';\r\n        $(this).removeClass('btn-outline-secondary').addClass('btn-outline-primary');\r\n        $('#randomOrderBtn').removeClass('btn-outline-primary').addClass('btn-outline-secondary');\r\n        buildFillForm();\r\n    });\r\n\r\n    $('#randomOrderBtn').on('click', function () {\r\n        state.fillOrder = 'random';\r\n        $(this).removeClass('btn-outline-secondary').addClass('btn-outline-primary');\r\n        $('#alphabeticalOrderBtn').removeClass('btn-outline-primary').addClass('btn-outline-secondary');\r\n        buildFillForm();\r\n    });\r\n\r\n    // Tag autocomplete\r\n    $(\"#filterTag\").autocomplete({\r\n        source: function (request, response) {\r\n            $.ajax({\r\n                url: '/api/gettags',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: (tags) => {\r\n                    const filteredTags = $.ui.autocomplete.filter(tags, request.term);\r\n                    response(filteredTags);\r\n                },\r\n                error: (err) => {\r\n                    console.error('Failed to load tags for autocomplete', err);\r\n                    response([]);\r\n                }\r\n            });\r\n        },\r\n        minLength: 1,\r\n        select: (event, ui) => {\r\n            $(\"#filterTag\").val(ui.item.value);\r\n            $(\"#applyFilters\").click();\r\n            return false;\r\n        }\r\n    });\r\n\r\n    // Apply filters button\r\n    $('#applyFilters').on('click', () => {\r\n        Storage.loadSavedStoriesList();\r\n    });\r\n\r\n    // Share story button\r\n    $('#shareStory').on('click', () => {\r\n        const finalText = $('#finalStory').text();\r\n        const title = $('#displayTitle').text();\r\n        const author = $('#displayAuthor').text();\r\n        const content = formatStoryForExport(title, author, finalText);\r\n        \r\n        domUtils.copyToClipboard(content)\r\n            .then(success => {\r\n                if (success) {\r\n                    domUtils.showToast('Story copied to clipboard!');\r\n                } else {\r\n                    domUtils.showError('Copy Failed', 'Failed to copy story. Please copy manually.');\r\n                }\r\n            });\r\n    });\r\n\r\n    // Story editor input event\r\n    $('#storyText').on('input', () => {\r\n        updateVariablesFromEditor();\r\n        state.storyHasUnsavedChanges = true;\r\n    });\r\n\r\n    // Upload story button\r\n    $('#uploadStoryBtn').on('click', () => { \r\n        $('#uploadStory').click(); \r\n    });\r\n    \r\n    $('#uploadStory').on('change', function () {\r\n        const file = this.files[0];\r\n        if (!file) return;\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            const content = e.target.result;\r\n            const storyData = parseStoryFile(content);\r\n            \r\n            $('#storyTitle').val(storyData.title);\r\n            $('#storyAuthor').val(storyData.author);\r\n            $('#storyText').html(storyData.content);\r\n            \r\n            // Reset state\r\n            state.variables = [];\r\n            state.variableCounts = {};\r\n            state.insertionCounter = 0;\r\n            state.pronounGroupCount = 0;\r\n            state.pronounGroups = {};\r\n            state.fillValues = {};\r\n            state.customPlaceholders = [];\r\n            \r\n            updateVariablesFromEditor();\r\n        };\r\n        reader.readAsText(file);\r\n    });\r\n\r\n    // Start game button\r\n    $('#startGame').on('click', () => {\r\n        const content = $('#storyText').html();\r\n        if (!content.trim()) {\r\n            domUtils.showError('Empty Story', 'Please write a story before continuing.');\r\n            return;\r\n        }\r\n        updateVariablesFromEditor();\r\n        state.storyText = generateLegacyText();\r\n        if (!state.variables.length) {\r\n            domUtils.showError('No Placeholders', 'No placeholders found in the story.');\r\n            return;\r\n        }\r\n        buildFillForm();\r\n        $('#inputs').removeClass('d-none');\r\n        $('#editor').addClass('d-none');\r\n    });\r\n\r\n    // Generate story button\r\n    $('#generateStory').on('click', handleGenerateStory);\r\n\r\n    // Create new story buttons\r\n    $('#createNewStory2, #createNewStory').on('click', handleCreateNewStory);\r\n\r\n    // Story editing flow buttons\r\n    $('#editStoryEntries').on('click', () => {\r\n        buildFillForm();\r\n        $('#result').addClass('d-none');\r\n        $('#inputs').removeClass('d-none');\r\n    });\r\n    \r\n    $('#backToEditor, #backToEditor2').on('click', () => {\r\n        $('#result, #inputs').addClass('d-none');\r\n        $('#editor').removeClass('d-none');\r\n    });\r\n\r\n    // Save story to site button\r\n    $('#saveStoryToSite').on('click', handleSaveStoryToSite);\r\n\r\n    // Download story button\r\n    $('#downloadStory').on('click', () => {\r\n        const finalText = $('#finalStory').text();\r\n        const title = $('#displayTitle').text();\r\n        const author = $('#displayAuthor').text();\r\n        const content = formatStoryForExport(title, author, finalText);\r\n        const fileName = createFilenameFromTitle(title);\r\n        \r\n        domUtils.downloadTextFile(content, fileName);\r\n    });\r\n\r\n    // Saved stories buttons\r\n    $('#mySavedStoriesBtn').on('click', () => {\r\n        Storage.loadSavedStoriesList();\r\n        $('#savedStoriesModal').modal('show');\r\n    });\r\n    \r\n    $(document).on('click', '.loadSavedStoryBtn', function () {\r\n        const index = $(this).data('index');\r\n        $('#savedStoriesModal').modal('hide');\r\n        Storage.loadSavedStory(index, \"play\");\r\n    });\r\n    \r\n    $(document).on('click', '.editSavedStoryBtn', function () {\r\n        const index = $(this).data('index');\r\n        $('#savedStoriesModal').modal('hide');\r\n        Storage.loadSavedStory(index, \"edit\");\r\n    });\r\n    \r\n    $(document).on('click', '.deleteSavedStoryBtn', function () {\r\n        const title = $(this).data('title');\r\n        domUtils.confirmDialog({\r\n            title: 'Delete Story?',\r\n            text: 'Are you sure you want to delete this saved story?',\r\n            confirmButtonText: 'Yes, delete it!'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) Storage.deleteSavedStory(title);\r\n        });\r\n    });\r\n\r\n    // Rating submission\r\n    $('#submitRating').on('click', () => {\r\n        const rating = parseInt($('#storyRating').val(), 10);\r\n        if (!state.currentStoryId) {\r\n            domUtils.showError('Error', 'Story ID not found.');\r\n            return;\r\n        }\r\n        $.ajax({\r\n            url: '/api/rateStory',\r\n            method: 'POST',\r\n            contentType: 'application/json',\r\n            data: JSON.stringify({ storyId: state.currentStoryId, rating }),\r\n            success: (data) => {\r\n                domUtils.showToast(`Thank you for rating! New average: ${data.rating.toFixed(1)} (${data.ratingCount} votes)`);\r\n            },\r\n            error: (xhr, statusText, errorThrown) => {\r\n                Storage.handleAjaxError(xhr, statusText, errorThrown, 'Failed to rate story');\r\n            }\r\n        });\r\n    });\r\n\r\n    // Editor key handling for placeholders\r\n    $('#storyText').on('keydown', (e) => {\r\n        const sel = window.getSelection();\r\n        if (sel.rangeCount) {\r\n            let range = sel.getRangeAt(0);\r\n            if (e.key === \"ArrowRight\") {\r\n                let node = sel.anchorNode;\r\n                if (node.nodeType === Node.TEXT_NODE && node.parentNode.classList.contains('placeholder')) {\r\n                    if (sel.anchorOffset >= node.nodeValue.length) {\r\n                        e.preventDefault();\r\n                        let placeholder = node.parentNode;\r\n                        let newRange = document.createRange();\r\n                        newRange.setStartAfter(placeholder);\r\n                        newRange.collapse(true);\r\n                        sel.removeAllRanges();\r\n                        sel.addRange(newRange);\r\n                    }\r\n                }\r\n            }\r\n            if (e.key === \"Backspace\") {\r\n                let node = sel.anchorNode;\r\n                if (node.nodeType === Node.TEXT_NODE && node.parentNode.classList.contains('placeholder') && sel.anchorOffset === 0) {\r\n                    e.preventDefault();\r\n                    let placeholder = node.parentNode;\r\n                    let newRange = document.createRange();\r\n                    newRange.setStartBefore(placeholder);\r\n                    newRange.collapse(true);\r\n                    sel.removeAllRanges();\r\n                    sel.addRange(newRange);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // Add placeholder button\r\n    $('#addPlaceholderBtn').on('click', () => { \r\n        $('#placeholderModal').modal('show'); \r\n    });\r\n\r\n    // Click handler for existing placeholders\r\n    document.getElementById('existingPlaceholdersContainer').addEventListener('click', (e) => {\r\n        const btn = e.target.closest('.placeholder-item');\r\n        if (!btn) return;\r\n        const id = btn.getAttribute('data-id');\r\n        const variable = state.variables.find(v => v.id === id);\r\n        if (variable) duplicatePlaceholder(variable);\r\n    });\r\n\r\n    // Add custom placeholder button\r\n    $('#addCustomPlaceholderBtn').on('click', () => {\r\n        const raw = $('#placeholderSearch').val();\r\n        const usage = $('input[name=\"customPlaceholderType\"]:checked').val() || \"generic\";\r\n        if (usage === \"noun\") {\r\n            addNewCustomPlaceholderWithUsage(raw, \"noun\");\r\n            showNounNumberSelection(\"NN_\" + Utils.pascalCase(raw), Utils.naturalDisplay(raw));\r\n        } else if (usage === \"verb\") {\r\n            addNewCustomPlaceholderWithUsage(raw, \"verb\");\r\n            showVerbTenseSelection(\"VB_\" + Utils.pascalCase(raw), Utils.naturalDisplay(raw));\r\n        } else {\r\n            addNewCustomPlaceholder(raw);\r\n            insertPlaceholderFromCustom(raw);\r\n        }\r\n        $('#placeholderSearch').val('');\r\n        updatePlaceholderAccordion('#placeholderAccordion', '#noResults', state.currentPlaceholderSearch);\r\n    });\r\n\r\n    // Modal add custom placeholder button\r\n    $('#modalAddCustomPlaceholderBtn').on('click', () => {\r\n        const raw = $('#modalPlaceholderSearch').val();\r\n        const usage = $('input[name=\"modalCustomPlaceholderType\"]:checked').val() || \"generic\";\r\n        if (usage === \"noun\") {\r\n            addNewCustomPlaceholderWithUsage(raw, \"noun\");\r\n            showNounNumberSelection(\"NN_\" + Utils.pascalCase(raw), Utils.naturalDisplay(raw));\r\n        } else if (usage === \"verb\") {\r\n            addNewCustomPlaceholderWithUsage(raw, \"verb\");\r\n            showVerbTenseSelection(\"VB_\" + Utils.pascalCase(raw), Utils.naturalDisplay(raw));\r\n        } else {\r\n            addNewCustomPlaceholder(raw);\r\n            insertPlaceholderFromCustom(raw);\r\n        }\r\n        updatePlaceholderAccordion('#modalPlaceholderAccordion', '#modalNoResults', state.currentModalPlaceholderSearch);\r\n        $('#placeholderModal').modal('hide');\r\n        $('#modalPlaceholderSearch').val('');\r\n        updatePlaceholderAccordion('#modalPlaceholderAccordion', '#modalNoResults', state.currentModalPlaceholderSearch);\r\n    });\r\n\r\n    // Info icon handlers\r\n    $(document).on('click', '.accordion-info-icon', (e) => {\r\n        e.stopPropagation();\r\n        const tooltip = $(e.currentTarget).data('tooltip');\r\n        domUtils.showToast(tooltip, 'info');\r\n    });\r\n\r\n    $(document).on('click', '.fill-info-icon', (e) => {\r\n        e.stopPropagation();\r\n        const type = $(e.currentTarget).data('type');\r\n        const tooltip = TypeHelpers.getTooltipForType(type);\r\n        domUtils.showToast(tooltip, 'info');\r\n    });\r\n\r\n    // Show more toggle for placeholder sections\r\n    $(document).on('click', '.show-more-toggle', function () {\r\n        const parentList = $(this).closest('.list-group');\r\n        const hiddenItems = parentList.find('.secondary-placeholder-wrapper .secondary-placeholder');\r\n        const link = $(this);\r\n        link.text(link.text() === 'Show More' ? 'Show Less' : 'Show More');\r\n        hiddenItems.toggle();\r\n    });\r\n\r\n    // Modal placeholder click handler\r\n    $(document).on('click', '#modalPlaceholderAccordion .placeholder-btn', (e) => {\r\n        e.stopImmediatePropagation();\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        if ($('#placeholderModal').hasClass('show')) {\r\n            $('#placeholderModal').modal('hide');\r\n        }\r\n        const internalType = $(e.currentTarget).data('internal');\r\n        const displayName = $(e.currentTarget).data('display');\r\n        handlePlaceholderClick(internalType, displayName);\r\n    });\r\n\r\n    // Regular placeholder button click\r\n    $(document).on('click', '.placeholder-btn', (e) => {\r\n        if (state.placeholderInsertionInProgress) return;\r\n        state.placeholderInsertionInProgress = true;\r\n        if ($(e.currentTarget).closest('#modalPlaceholderAccordion').length > 0) {\r\n            state.placeholderInsertionInProgress = false;\r\n            return;\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        const internalType = $(e.currentTarget).data('internal');\r\n        const displayName = $(e.currentTarget).data('display');\r\n        handlePlaceholderClick(internalType, displayName);\r\n        setTimeout(() => { state.placeholderInsertionInProgress = false; }, 50);\r\n    });\r\n};\r\n\r\n// Handle placeholder button click\r\nconst handlePlaceholderClick = (internalType, displayName) => {\r\n    if (state.isEditingPlaceholder && state.currentEditingVariable) {\r\n        updateExistingPlaceholder(state.currentEditingVariable, internalType, displayName);\r\n        state.isEditingPlaceholder = false;\r\n        state.currentEditingVariable = null;\r\n        $('#placeholderModal').modal('hide');\r\n    } else {\r\n        if (internalType === \"PRONOUN\") {\r\n            pickPronounFormAndGroup();\r\n            $('#placeholderSearch').val('');\r\n            updatePlaceholderAccordion('#placeholderAccordion', '#noResults', state.currentPlaceholderSearch);\r\n            return;\r\n        }\r\n        if (internalType.indexOf(\"NN\") === 0) {\r\n            if (internalType === \"NN_Person\") {\r\n                showPersonTypeSelection(internalType, displayName);\r\n                $('#placeholderSearch').val('');\r\n                updatePlaceholderAccordion('#placeholderAccordion', '#noResults', state.currentPlaceholderSearch);\r\n                return;\r\n            }\r\n            showNounNumberSelection(internalType, displayName);\r\n            $('#placeholderSearch').val('');\r\n            updatePlaceholderAccordion('#placeholderAccordion', '#noResults', state.currentPlaceholderSearch);\r\n            return;\r\n        }\r\n\r\n        if (internalType.indexOf(\"VB\") === 0 || internalType === \"MD\") {\r\n            showVerbTenseSelection(internalType, displayName);\r\n            $('#placeholderSearch').val('');\r\n            updatePlaceholderAccordion('#placeholderAccordion', '#noResults', state.currentPlaceholderSearch);\r\n            return;\r\n        }\r\n        insertPlaceholder(internalType, displayName, false);\r\n        $('#placeholderSearch').val('');\r\n        updatePlaceholderAccordion('#placeholderAccordion', '#noResults', state.currentPlaceholderSearch);\r\n    }\r\n};\r\n\r\n// Handle create new story button click\r\nconst handleCreateNewStory = (e) => {\r\n    e.preventDefault();\r\n    if (state.storyHasUnsavedChanges) {\r\n        domUtils.confirmDialog({\r\n            title: 'Unsaved changes',\r\n            text: 'Your story has unsaved changes. Would you like to save it to the site before starting a new one?',\r\n            showDenyButton: true,\r\n            confirmButtonText: 'Save and start new',\r\n            denyButtonText: 'Discard changes'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                Storage.addCurrentStoryToSavedStories();\r\n                setTimeout(resetStoryState, 1000);\r\n            } else if (result.isDenied) {\r\n                domUtils.confirmDialog({\r\n                    title: 'Are you sure?',\r\n                    text: 'This will discard your current unsaved story.',\r\n                    confirmButtonText: 'Yes, start new'\r\n                }).then((res) => {\r\n                    if (res.isConfirmed) resetStoryState();\r\n                });\r\n            }\r\n        });\r\n    } else {\r\n        domUtils.confirmDialog({\r\n            title: 'Are you sure?',\r\n            text: 'This will discard your current story.',\r\n            confirmButtonText: 'Yes, start new'\r\n        }).then((res) => {\r\n            if (res.isConfirmed) resetStoryState();\r\n        });\r\n    }\r\n};\r\n\r\n// Handle generate story button click\r\nconst handleGenerateStory = () => {\r\n    // Use the form validation function from forms.js\r\n    if (!validateInputForm()) {\r\n        return; // Validation failed\r\n    }\r\n    \r\n    // Generate the final story with replacements\r\n    let final = generateLegacyText();\r\n    final = fillPlaceholders(final, state.variables, state.fillValues, state.pronounGroups);\r\n    \r\n    // Update the result display\r\n    $('#finalStory').text(final);\r\n    $('#displayTitle').text($('#storyTitle').val());\r\n    $('#displayAuthor').text($('#storyAuthor').val());\r\n    $('#displayTags').text($('#storyTags').val());\r\n    $('#result').removeClass('d-none');\r\n    $('#inputs').addClass('d-none');\r\n};\r\n\r\n// Handle save story to site button\r\nconst handleSaveStoryToSite = () => {\r\n    Swal.fire({\r\n        title: 'Save Story',\r\n        html: `\r\n      <input type=\"text\" id=\"swalTitle\" class=\"swal2-input\" placeholder=\"Story Title\" value=\"${$('#storyTitle').val()}\">\r\n      <input type=\"text\" id=\"swalAuthor\" class=\"swal2-input\" placeholder=\"Author\" value=\"${$('#storyAuthor').val()}\">\r\n      <input type=\"text\" id=\"swalTags\" class=\"swal2-input\" placeholder=\"Tags (comma separated)\" value=\"${$('#storyTags').val()}\">\r\n      <input type=\"password\" id=\"swalPassword\" class=\"swal2-input\" placeholder=\"Password (optional)\">\r\n      <div id=\"preexistingTagsContainer\" style=\"text-align:left; margin-top:10px;\"></div>\r\n    `,\r\n        didOpen: () => {\r\n            loadPreexistingTags();\r\n        },\r\n        showCancelButton: true,\r\n        confirmButtonText: 'Save',\r\n        preConfirm: () => {\r\n            return {\r\n                title: document.getElementById('swalTitle').value,\r\n                author: document.getElementById('swalAuthor').value,\r\n                tags: document.getElementById('swalTags').value,\r\n                password: document.getElementById('swalPassword').value\r\n            };\r\n        }\r\n    }).then((result) => {\r\n        if (result.isConfirmed) {\r\n            const data = result.value;\r\n            // Update fields in the editor\r\n            $('#storyTitle').val(data.title);\r\n            $('#storyAuthor').val(data.author);\r\n            $('#storyTags').val(data.tags);\r\n\r\n            let story = {\r\n                storyTitle: data.title,\r\n                storyAuthor: data.author,\r\n                storyText: $('#storyText').html(),\r\n                variables: state.variables,\r\n                pronounGroups: state.pronounGroups,\r\n                variableCounts: state.variableCounts,\r\n                pronounGroupCount: state.pronounGroupCount,\r\n                customPlaceholders: state.customPlaceholders,\r\n                tags: data.tags ? data.tags.split(',').map(s => s.trim()) : [],\r\n                savedAt: new Date().toISOString(),\r\n                password: data.password || null\r\n            };\r\n\r\n            $.ajax({\r\n                url: '/api/savestory',\r\n                method: 'POST',\r\n                contentType: 'application/json',\r\n                data: JSON.stringify(story),\r\n                success: () => {\r\n                    domUtils.showToast('Story saved to site!');\r\n                    state.storyHasUnsavedChanges = false;\r\n                },\r\n                error: (xhr, statusText, errorThrown) => {\r\n                    Storage.handleAjaxError(xhr, statusText, errorThrown, 'Failed to save story');\r\n                }\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\n// Load preexisting tags for tag selector\r\nconst loadPreexistingTags = () => {\r\n    $.ajax({\r\n        url: '/api/gettags',\r\n        method: 'GET',\r\n        success: (tags) => {\r\n            let container = $('#preexistingTagsContainer');\r\n            container.empty();\r\n            if (tags.length > 0) {\r\n                container.append('<p>Select a tag:</p>');\r\n                tags.forEach(tag => {\r\n                    const btn = $('<button type=\"button\" class=\"btn btn-sm btn-outline-secondary m-1 preexisting-tag-btn\"></button>');\r\n                    btn.text(tag);\r\n                    btn.on('click', () => {\r\n                        let current = $('#swalTags').val();\r\n                        let tagsArr = current ? current.split(',').map(t => t.trim()).filter(Boolean) : [];\r\n                        if (!tagsArr.includes(tag)) {\r\n                            tagsArr.push(tag);\r\n                            $('#swalTags').val(tagsArr.join(', '));\r\n                        }\r\n                    });\r\n                    container.append(btn);\r\n                });\r\n            }\r\n        },\r\n        error: (err) => {\r\n            console.error('Failed to load preexisting tags', err);\r\n        }\r\n    });\r\n};\r\n\r\n$(document).on('click', '.fill-info-icon', (e) => {\r\n    e.stopPropagation();\r\n    const type = $(e.currentTarget).data('type');\r\n    const tooltip = TypeHelpers.getTooltipForType(type);\r\n    domUtils.showToast(tooltip, 'info');\r\n  });\r\n  \r\n  // Also ensure the show-more-toggle event is properly handled\r\n  $(document).on('click', '.show-more-toggle', function () {\r\n    const parentList = $(this).closest('.list-group');\r\n    const hiddenItems = parentList.find('.secondary-placeholder-wrapper .secondary-placeholder');\r\n    const link = $(this);\r\n    link.text(link.text() === 'Show More' ? 'Show Less' : 'Show More');\r\n    hiddenItems.toggle();\r\n  });\r\n  \r\n  // Add copy to clipboard handler if not already included\r\n  $('#copyStory').on('click', () => {\r\n    const finalText = $('#finalStory').text();\r\n    domUtils.copyTextToClipboard(finalText);\r\n  });","// public/js/ui/forms.js\r\nimport state from '../core/state.js';\r\nimport { TypeHelpers } from '../utils/typeHelpers.js';\r\n\r\n// ====================================================\r\n// BUILD THE FILL-IN-THE-BLANK FORM\r\n// ====================================================\r\nexport const buildFillForm = () => {\r\n    const form = $('#inputForm').empty();\r\n    appendPronounGroupsToForm(form);\r\n    appendNonPronounVariablesToForm(form);\r\n};\r\n\r\nconst appendPronounGroupsToForm = (form) => {\r\n    const groupSet = getPronounGroups();\r\n    const sortedGroups = Array.from(groupSet).sort((a, b) => a.localeCompare(b));\r\n    if (sortedGroups.length > 0) {\r\n        form.append(`<h4>Pronouns</h4>`);\r\n        sortedGroups.forEach(g => {\r\n            const block = createPronounGroupBlock(g);\r\n            form.append(block);\r\n        });\r\n        form.on('change', \"input[type='radio']\", handlePronounChoiceChange);\r\n    }\r\n};\r\n\r\nconst getPronounGroups = () => {\r\n    const groupSet = new Set();\r\n    for (const v of state.variables) {\r\n        if (v.internalType.startsWith('PRONOUN|')) {\r\n            const parts = v.internalType.split('|');\r\n            groupSet.add(parts[1]);\r\n        }\r\n    }\r\n    return groupSet;\r\n};\r\n\r\nconst createPronounGroupBlock = (groupName) => {\r\n    const block = $(`\r\n      <div class='form-group'>\r\n        <label id='${groupName}-label' title=\"Hover to see internal ID\">\r\n          ${groupName} - Person (select pronoun)\r\n          <i class=\"fas fa-info-circle fill-info-icon\" data-type=\"${groupName}\" style=\"font-size:0.8em; margin-left:5px;\"></i>\r\n        </label>\r\n      </div>\r\n    `);\r\n    const radios = `\r\n      <div class='form-check'>\r\n        <input type='radio' class='form-check-input' name='${groupName}-choice' value='HeHim'>\r\n        <label class='form-check-label'>He/Him</label>\r\n      </div>\r\n      <div class='form-check'>\r\n        <input type='radio' class='form-check-input' name='${groupName}-choice' value='SheHer'>\r\n        <label class='form-check-label'>She/Her</label>\r\n      </div>\r\n      <div class='form-check'>\r\n        <input type='radio' class='form-check-input' name='${groupName}-choice' value='TheyThem'>\r\n        <label class='form-check-label'>They/Them</label>\r\n      </div>\r\n      <div class='form-check mb-2'>\r\n        <input type='radio' class='form-check-input' name='${groupName}-choice' value='Custom'>\r\n        <label class='form-check-label'>Custom</label>\r\n      </div>\r\n      <input type='text' class='form-control form-control-sm d-none' id='${groupName}-custom'\r\n        placeholder='comma-separated: subject, object, possAdj, possPron, reflexive'>\r\n    `;\r\n    block.append(radios);\r\n    return block;\r\n};\r\n\r\nconst handlePronounChoiceChange = function () {\r\n    const groupName = $(this).attr('name').replace('-choice', '');\r\n    if ($(this).val() === 'Custom') {\r\n        $(`#${groupName}-custom`).removeClass('d-none');\r\n    } else {\r\n        $(`#${groupName}-custom`).addClass('d-none');\r\n    }\r\n};\r\n\r\nconst appendNonPronounVariablesToForm = (form) => {\r\n    let nonPronounVars = state.variables.filter(v => !v.internalType.startsWith('PRONOUN|'));\r\n    if (state.fillOrder === 'alphabetical') {\r\n        nonPronounVars.sort((a, b) => a.officialDisplay.localeCompare(b.officialDisplay));\r\n    } else if (state.fillOrder === 'random') {\r\n        nonPronounVars.sort(() => Math.random() - 0.5);\r\n    }\r\n    nonPronounVars.forEach(variable => {\r\n        const groupRow = createInputRow(variable);\r\n        form.append(groupRow);\r\n    });\r\n};\r\n\r\nconst createInputRow = (variable) => {\r\n    const groupRow = $(`\r\n      <div class=\"form-group input-row\">\r\n        <div class=\"row\">\r\n          <div class=\"col-sm-4\">\r\n            <label class=\"input-label\" title=\"Internal ID: ${variable.id}\">\r\n              ${variable.officialDisplay}\r\n            </label>\r\n          </div>\r\n          <div class=\"col-sm-8\">\r\n            <input type=\"text\"\r\n              class=\"form-control form-control-sm compact-input\"\r\n              name=\"${variable.id}\"\r\n              data-label=\"${variable.officialDisplay}\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `);\r\n    if (state.fillValues[variable.id]) {\r\n        groupRow.find('input').val(state.fillValues[variable.id]);\r\n    }\r\n    return groupRow;\r\n};\r\n\r\n// Add the missing validateInputForm function to forms.js\r\n\r\nexport const validateInputForm = (formData) => {\r\n  // Input validation logic\r\n  if (!formData.display || formData.display.trim() === '') {\r\n    return { valid: false, message: 'Display name is required' };\r\n  }\r\n  \r\n  if (!formData.internalType || formData.internalType.trim() === '') {\r\n    return { valid: false, message: 'Internal type is required' };\r\n  }\r\n  \r\n  return { valid: true };\r\n};","    // Start of Selection\r\n    // public/js/ui/menu.js\r\n    import state from '../core/state.js';\r\n    import { duplicatePlaceholder, insertPlaceholder } from '../core/placeholders.js';\r\n    \r\n    // Menu element references\r\n    let selectionMenu;\r\n    let placeholderEditMenu;\r\n    \r\n    // Helper function to position menu near an element\r\n    export const positionMenu = (menu, rect) => {\r\n        menu.style.display = 'block';\r\n        const menuWidth = menu.offsetWidth;\r\n        const menuHeight = menu.offsetHeight;\r\n        const offset = 5;\r\n        let desiredTop = (rect.bottom + offset + menuHeight <= window.innerHeight)\r\n            ? window.scrollY + rect.bottom + offset\r\n            : window.scrollY + rect.top - menuHeight - offset;\r\n        let desiredLeft = window.scrollX + rect.left + (rect.width / 2) - (menuWidth / 2);\r\n        desiredLeft = Math.max(window.scrollX + 5, Math.min(desiredLeft, window.scrollX + window.innerWidth - menuWidth - 5));\r\n        menu.style.top = desiredTop + 'px';\r\n        menu.style.left = desiredLeft + 'px';\r\n    };\r\n    \r\n    // Hide a menu\r\n    export const hideMenu = (menu) => { \r\n        menu.style.display = 'none'; \r\n    };\r\n    \r\n    // Hide all menus\r\n    export const hideAllMenus = () => { \r\n        hideMenu(selectionMenu); \r\n        hideMenu(placeholderEditMenu); \r\n    };\r\n    \r\n    // Reset current editing state\r\n    const resetCurrentEditing = () => {\r\n        state.currentEditingVariable = null;\r\n        state.currentPlaceholderElement = null;\r\n    };\r\n    \r\n    // Initialize the context menus\r\n    export const initMenus = () => {\r\n        // Create selection menu for text selections\r\n        selectionMenu = document.createElement('div');\r\n        selectionMenu.id = 'textSelectionMenu';\r\n        Object.assign(selectionMenu.style, {\r\n            position: 'absolute',\r\n            display: 'none',\r\n            zIndex: '1000',\r\n            background: '#fff',\r\n            border: '1px solid #ccc',\r\n            padding: '5px',\r\n            borderRadius: '4px',\r\n            boxShadow: '0px 2px 4px rgba(0,0,0,0.2)'\r\n        });\r\n        selectionMenu.innerHTML = `\r\n        <button id=\"newPlaceholderBtn\" class=\"btn btn-sm btn-primary\">New Placeholder</button>\r\n        <button id=\"reusePlaceholderBtn\" class=\"btn btn-sm btn-secondary\">Reuse Placeholder</button>\r\n      `;\r\n        document.body.appendChild(selectionMenu);\r\n    \r\n        // Create placeholder edit menu for modifying existing placeholders\r\n        placeholderEditMenu = document.createElement('div');\r\n        placeholderEditMenu.id = 'placeholderEditMenu';\r\n        Object.assign(placeholderEditMenu.style, {\r\n            position: 'absolute',\r\n            display: 'none',\r\n            zIndex: '1000',\r\n            background: '#fff',\r\n            border: '1px solid #ccc',\r\n            padding: '5px',\r\n            borderRadius: '4px',\r\n            boxShadow: '0px 2px 4px rgba(0,0,0,0.2)'\r\n        });\r\n        placeholderEditMenu.innerHTML = `\r\n        <button id=\"editPlaceholderBtn\" class=\"btn btn-sm btn-primary\">Change Placeholder</button>\r\n        <button id=\"editOverrideBtn\" class=\"btn btn-sm btn-secondary\">Change Override</button>\r\n        <button id=\"deletePlaceholderBtn\" class=\"btn btn-sm btn-danger\">Delete</button>\r\n      `;\r\n        document.body.appendChild(placeholderEditMenu);\r\n    \r\n        // Attach event listeners\r\n        attachMenuEventListeners();\r\n    };\r\n    \r\n    // Handle text selection to show the selection menu\r\n    export const handleTextSelection = () => {\r\n        setTimeout(() => {\r\n            const sel = window.getSelection();\r\n            if (sel && sel.toString().trim().length > 0) {\r\n                if (sel.anchorNode && sel.anchorNode.parentNode &&\r\n                    !sel.anchorNode.parentNode.classList.contains('placeholder')) {\r\n                    state.lastRange = sel.getRangeAt(0);\r\n                    const rect = state.lastRange.getBoundingClientRect();\r\n                    positionMenu(selectionMenu, rect);\r\n                }\r\n            } else {\r\n                hideMenu(selectionMenu);\r\n            }\r\n        }, 0);\r\n    };\r\n    \r\n    // Show the placeholder edit menu when a placeholder is clicked\r\n    export const handlePlaceholderClick = (e) => {\r\n        if (e.target.classList.contains('placeholder')) {\r\n            // Stop propagation so that other handlers (e.g. selection menu) do not interfere\r\n            e.stopPropagation();\r\n            // Find the corresponding variable using the data-id attribute\r\n            state.currentEditingVariable = state.variables.find(v => v.id === e.target.getAttribute('data-id'));\r\n            state.currentPlaceholderElement = e.target;\r\n            // Position the placeholder edit menu near the clicked element\r\n            positionMenu(placeholderEditMenu, e.target.getBoundingClientRect());\r\n        }\r\n    };\r\n    \r\n    // Handle delete button click in placeholder edit menu\r\n    export const handleDeletePlaceholder = () => {\r\n        hideMenu(placeholderEditMenu);\r\n        if (state.currentPlaceholderElement) {\r\n            state.currentPlaceholderElement.remove();\r\n        }\r\n        // Update the variables in the editor after deletion\r\n        if (typeof updateVariablesFromEditor === 'function') {\r\n            updateVariablesFromEditor();\r\n        }\r\n        resetCurrentEditing();\r\n    };\r\n    \r\n    // Handle edit placeholder button click\r\n    export const handleEditPlaceholder = () => {\r\n        hideMenu(placeholderEditMenu);\r\n        state.isEditingPlaceholder = true;\r\n        // Open the modal so the user can select a new placeholder type\r\n        $('#placeholderModal').modal('show');\r\n        resetCurrentEditing();\r\n    };\r\n    \r\n    // Handle edit override button click\r\n    export const handleEditOverride = async () => {\r\n        hideMenu(placeholderEditMenu);\r\n        const { value: newOverride } = await Swal.fire({\r\n            title: 'Change Override',\r\n            input: 'text',\r\n            inputLabel: 'Enter new override text',\r\n            inputValue: state.currentPlaceholderElement ? state.currentPlaceholderElement.textContent : ''\r\n        });\r\n        if (newOverride !== undefined) {\r\n            if (state.currentPlaceholderElement) {\r\n                state.currentPlaceholderElement.textContent = newOverride;\r\n            }\r\n            if (state.currentEditingVariable) {\r\n                state.currentEditingVariable.displayOverride = newOverride;\r\n            }\r\n            if (typeof updateVariablesList === 'function') {\r\n                updateVariablesList();\r\n            }\r\n        }\r\n        resetCurrentEditing();\r\n    };\r\n    \r\n    // Handle \"New Placeholder\" button click\r\n    export const handleNewPlaceholder = () => {\r\n        hideMenu(selectionMenu);\r\n        $('#placeholderModal').modal('show');\r\n    };\r\n    \r\n    // Handle \"Reuse Placeholder\" button click\r\n    export const handleReusePlaceholder = () => {\r\n        hideMenu(selectionMenu);\r\n        if (state.variables.length === 0) {\r\n            Swal.fire('No existing placeholders', 'There are no placeholders to reuse yet.', 'info');\r\n            return;\r\n        }\r\n        const sortedVariables = [...state.variables].sort((a, b) =>\r\n            (state.usageTracker[b.id] || 0) - (state.usageTracker[a.id] || 0) || a.order - b.order\r\n        );\r\n        let html = `<div id=\"reusePlaceholderContainer\" style=\"display: flex; flex-wrap: wrap;\">`;\r\n        sortedVariables.forEach(v => {\r\n            const displayText = v.displayOverride || v.officialDisplay;\r\n            html += `<button type=\"button\" \r\n                       class=\"btn btn-outline-secondary btn-sm m-1 reuse-placeholder-btn\" \r\n                       data-id=\"${v.id}\" \r\n                       title=\"${v.id}\">\r\n                 ${displayText}\r\n               </button>`;\r\n        });\r\n        html += `</div>`;\r\n        Swal.fire({\r\n            title: 'Select a placeholder to reuse',\r\n            html,\r\n            showCancelButton: true,\r\n            showConfirmButton: false,\r\n            didOpen: () => {\r\n                const container = Swal.getHtmlContainer();\r\n                const btns = container.querySelectorAll('.reuse-placeholder-btn');\r\n                btns.forEach(button => {\r\n                    button.addEventListener('click', () => {\r\n                        const id = button.getAttribute('data-id');\r\n                        const variable = state.variables.find(v => v.id === id);\r\n                        if (variable) duplicatePlaceholder(variable);\r\n                        Swal.close();\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    };\r\n    \r\n    // Attach event listeners to the menu elements\r\n    const attachMenuEventListeners = () => {\r\n        // Click outside menus to close them\r\n        document.addEventListener('click', (e) => {\r\n            if (!selectionMenu.contains(e.target) && !placeholderEditMenu.contains(e.target)) {\r\n                hideAllMenus();\r\n            }\r\n        });\r\n    \r\n        // Text selection events\r\n        document.getElementById('storyText').addEventListener('mouseup', handleTextSelection);\r\n    \r\n        // Placeholder click events\r\n        document.getElementById('storyText').addEventListener('click', handlePlaceholderClick);\r\n    \r\n        // Menu button event handlers\r\n        document.getElementById('newPlaceholderBtn').addEventListener('click', handleNewPlaceholder);\r\n        document.getElementById('reusePlaceholderBtn').addEventListener('click', handleReusePlaceholder);\r\n        document.getElementById('editPlaceholderBtn').addEventListener('click', handleEditPlaceholder);\r\n        document.getElementById('editOverrideBtn').addEventListener('click', handleEditOverride);\r\n        document.getElementById('deletePlaceholderBtn').addEventListener('click', handleDeletePlaceholder);\r\n    };\r\n    \r\n    // Export menu elements for external access if needed\r\n    export const getSelectionMenu = () => selectionMenu;\r\n    export const getPlaceholderEditMenu = () => placeholderEditMenu;\r\n    \r\n    // Export the initialization of menus to be called from main.js\r\n    export const initMenuSystem = () => {\r\n        // Create menus if they don't exist yet\r\n        if (!selectionMenu || !placeholderEditMenu) {\r\n          initMenus();\r\n        }\r\n    };","// public/js/utils/domUtils.js\r\n\r\n/**\r\n * DOM utility functions for working with the story editor and UI\r\n */\r\n\r\n// Show a confirmation dialog using SweetAlert\r\nexport const confirmDialog = (options) => {\r\n  const defaultOptions = {\r\n    title: 'Are you sure?',\r\n    text: 'This action cannot be undone.',\r\n    icon: 'warning',\r\n    showCancelButton: true,\r\n    confirmButtonText: 'Yes',\r\n    cancelButtonText: 'No'\r\n  };\r\n  \r\n  const finalOptions = { ...defaultOptions, ...options };\r\n  return Swal.fire(finalOptions);\r\n};\r\n\r\n// Show a toast notification\r\nexport const showToast = (title, icon = 'success', timer = 1500) => {\r\n  Swal.fire({\r\n    toast: true,\r\n    position: 'top-end',\r\n    icon: icon,\r\n    title: title,\r\n    showConfirmButton: false,\r\n    timer: timer,\r\n    timerProgressBar: true\r\n  });\r\n};\r\n\r\n// Show an error message\r\nexport const showError = (title, text = '') => {\r\n  Swal.fire({\r\n    title: title,\r\n    text: text,\r\n    icon: 'error'\r\n  });\r\n};\r\n\r\n// Toggle element visibility\r\nexport const toggleVisibility = (selector, isVisible) => {\r\n  const element = typeof selector === 'string' ? document.querySelector(selector) : selector;\r\n  if (element) {\r\n    element.style.display = isVisible ? '' : 'none';\r\n  }\r\n};\r\n\r\n// Toggle class on element\r\nexport const toggleClass = (selector, className, shouldAdd) => {\r\n  const element = typeof selector === 'string' ? document.querySelector(selector) : selector;\r\n  if (element) {\r\n    if (shouldAdd) {\r\n      element.classList.add(className);\r\n    } else {\r\n      element.classList.remove(className);\r\n    }\r\n  }\r\n};\r\n\r\n// Show/hide multiple elements by class\r\nexport const showView = (viewName) => {\r\n  // Hide all view containers\r\n  document.querySelectorAll('.view-container').forEach(el => {\r\n    el.classList.add('d-none');\r\n  });\r\n  \r\n  // Show the requested view\r\n  document.getElementById(viewName).classList.remove('d-none');\r\n};\r\n\r\n// Create element with attributes and content\r\nexport const createElement = (tag, attributes = {}, children = []) => {\r\n  const element = document.createElement(tag);\r\n  \r\n  // Set attributes\r\n  for (const [key, value] of Object.entries(attributes)) {\r\n    if (key === 'className') {\r\n      element.className = value;\r\n    } else if (key === 'style' && typeof value === 'object') {\r\n      Object.assign(element.style, value);\r\n    } else if (key.startsWith('on') && typeof value === 'function') {\r\n      const eventName = key.substring(2).toLowerCase();\r\n      element.addEventListener(eventName, value);\r\n    } else if (key === 'html') {\r\n      element.innerHTML = value;\r\n    } else if (key === 'text') {\r\n      element.textContent = value;\r\n    } else {\r\n      element.setAttribute(key, value);\r\n    }\r\n  }\r\n  \r\n  // Append children\r\n  children.forEach(child => {\r\n    if (typeof child === 'string') {\r\n      element.appendChild(document.createTextNode(child));\r\n    } else if (child instanceof Node) {\r\n      element.appendChild(child);\r\n    }\r\n  });\r\n  \r\n  return element;\r\n};\r\n\r\n// Get DOM element value safely (with default)\r\nexport const getElementValue = (selector, defaultValue = '') => {\r\n  const element = document.querySelector(selector);\r\n  if (!element) return defaultValue;\r\n  \r\n  if (element.type === 'checkbox') {\r\n    return element.checked;\r\n  } else if (element.type === 'radio') {\r\n    const checkedEl = document.querySelector(`${selector}:checked`);\r\n    return checkedEl ? checkedEl.value : defaultValue;\r\n  } else {\r\n    return element.value || defaultValue;\r\n  }\r\n};\r\n\r\n// Set DOM element value safely\r\nexport const setElementValue = (selector, value) => {\r\n  const element = document.querySelector(selector);\r\n  if (!element) return;\r\n  \r\n  if (element.type === 'checkbox') {\r\n    element.checked = !!value;\r\n  } else if (element.type === 'radio') {\r\n    const radio = document.querySelector(`${selector}[value=\"${value}\"]`);\r\n    if (radio) radio.checked = true;\r\n  } else {\r\n    element.value = value;\r\n  }\r\n};\r\n\r\n// Get form data as object\r\nexport const getFormData = (formSelector) => {\r\n  const form = document.querySelector(formSelector);\r\n  if (!form) return {};\r\n  \r\n  const formData = new FormData(form);\r\n  const data = {};\r\n  \r\n  for (const [key, value] of formData.entries()) {\r\n    data[key] = value;\r\n  }\r\n  \r\n  return data;\r\n};\r\n\r\n// Clear form fields\r\nexport const clearForm = (formSelector) => {\r\n  const form = document.querySelector(formSelector);\r\n  if (!form) return;\r\n  \r\n  form.reset();\r\n  \r\n  // Also clear any custom fields that might not be cleared by reset\r\n  form.querySelectorAll('input:not([type=\"submit\"]):not([type=\"button\"]):not([type=\"reset\"]), textarea, select').forEach(el => {\r\n    if (el.type === 'checkbox' || el.type === 'radio') {\r\n      el.checked = false;\r\n    } else {\r\n      el.value = '';\r\n    }\r\n  });\r\n};\r\n\r\n// Copy text to clipboard\r\nexport const copyToClipboard = (text) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (navigator.clipboard && navigator.clipboard.writeText) {\r\n      navigator.clipboard.writeText(text)\r\n        .then(() => {\r\n          resolve(true);\r\n        })\r\n        .catch(err => {\r\n          console.error('Error copying text: ', err);\r\n          const success = fallbackCopyTextToClipboard(text);\r\n          resolve(success);\r\n        });\r\n    } else {\r\n      const success = fallbackCopyTextToClipboard(text);\r\n      resolve(success);\r\n    }\r\n  });\r\n};\r\n\r\n// Fallback method for copying text to clipboard\r\nexport const fallbackCopyTextToClipboard = (text) => {\r\n  const textarea = document.createElement('textarea');\r\n  textarea.value = text;\r\n  textarea.style.position = 'fixed';\r\n  textarea.style.top = '-9999px';\r\n  document.body.appendChild(textarea);\r\n  textarea.focus();\r\n  textarea.select();\r\n  \r\n  try {\r\n    const successful = document.execCommand('copy');\r\n    document.body.removeChild(textarea);\r\n    return successful;\r\n  } catch (err) {\r\n    document.body.removeChild(textarea);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Download text as file\r\nexport const downloadTextFile = (content, filename) => {\r\n  const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = filename;\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n  URL.revokeObjectURL(url);\r\n  return true;\r\n};\r\n\r\n\r\n// Advanced copy to clipboard function\r\nexport const copyTextToClipboard = async (content) => {\r\n  if (navigator.clipboard) {\r\n    try {\r\n      await navigator.clipboard.writeText(content);\r\n      showToast('Copied to clipboard!');\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error copying text: ', err);\r\n      return fallbackCopyTextToClipboard(content);\r\n    }\r\n  } else {\r\n    return fallbackCopyTextToClipboard(content);\r\n  }\r\n};\r\n","// public/js/utils/typeHelpers.js\r\nimport state from '../core/state.js';\r\nimport { pronounMapping } from '../core/state.js';\r\n\r\nexport const TypeHelpers = {\r\n    naturalizeType: (type) => {\r\n        if (type.startsWith(\"NNPS\")) {\r\n            let sub = type.substring(4);\r\n            if (sub.startsWith(\"_\")) sub = sub.substring(1);\r\n            sub = sub.replace(/\\d+$/, '');\r\n            if (sub.toLowerCase() === \"person\") {\r\n                return \"Person (proper, plural)\";\r\n            }\r\n            return Utils.toTitleCase(Utils.naturalDisplay(sub || \"Proper Noun\")) + \" (Plural)\";\r\n        }\r\n        if (type.startsWith(\"NNP\")) {\r\n            let sub = type.substring(3);\r\n            if (sub.startsWith(\"_\")) sub = sub.substring(1);\r\n            sub = sub.replace(/\\d+$/, '');\r\n            if (sub.toLowerCase() === \"person\") {\r\n                return \"Person (proper, singular)\";\r\n            }\r\n            return Utils.toTitleCase(Utils.naturalDisplay(sub || \"Proper Noun\")) + \" (Singular)\";\r\n        }\r\n        if (type.startsWith(\"NNS\")) {\r\n            let sub = type.substring(3);\r\n            if (sub.startsWith(\"_\")) sub = sub.substring(1);\r\n            sub = sub.replace(/\\d+$/, '');\r\n            if (sub.toLowerCase() === \"person\") {\r\n                return \"Person (common, plural)\";\r\n            }\r\n            return Utils.toTitleCase(Utils.naturalDisplay(sub || \"Common Noun\")) + \" (Plural)\";\r\n        }\r\n        if (type.startsWith(\"NN\")) {\r\n            let sub = type.substring(2);\r\n            if (sub.startsWith(\"_\")) sub = sub.substring(1);\r\n            sub = sub.replace(/\\d+$/, '');\r\n            if (sub.toLowerCase() === \"person\") {\r\n                return \"Person (common, singular)\";\r\n            }\r\n            return Utils.toTitleCase(Utils.naturalDisplay(sub || \"Common Noun\")) + \" (Singular)\";\r\n        }\r\n        if (type.startsWith(\"NNS\")) {\r\n            let sub = type.substring(3);\r\n            if (sub.startsWith(\"_\")) sub = sub.substring(1);\r\n            sub = sub.replace(/\\d+$/, '');\r\n            return Utils.toTitleCase(Utils.naturalDisplay(sub || \"Common Noun\")) + \" (Plural)\";\r\n        }\r\n        if (type.startsWith(\"NN\")) {\r\n            let sub = type.substring(2);\r\n            if (sub.startsWith(\"_\")) sub = sub.substring(1);\r\n            sub = sub.replace(/\\d+$/, '');\r\n            return Utils.toTitleCase(Utils.naturalDisplay(sub || \"Common Noun\")) + \" (Singular)\";\r\n        }\r\n        if (type === \"Onomatopoeia\") return \"Onomatopoeia\";\r\n        if (type.startsWith(\"MD_\")) {\r\n            let tense = type.substring(3);\r\n            let tenseNatural = \"\";\r\n            switch (tense) {\r\n                case \"VB\": tenseNatural = \"Base (run)\"; break;\r\n                case \"VBP\": tenseNatural = \"Present (I walk)\"; break;\r\n                case \"VBZ\": tenseNatural = \"3rd Person (he leaves)\"; break;\r\n                case \"VBD\": tenseNatural = \"Past (slept)\"; break;\r\n                case \"VBG\": tenseNatural = \"Gerund (crying)\"; break;\r\n                case \"VBN\": tenseNatural = \"Past Participle (eaten)\"; break;\r\n                default: tenseNatural = tense;\r\n            }\r\n            return \"Modal Verb (\" + tenseNatural + \")\";\r\n        }\r\n        const verbTenseMap = {\r\n            \"VBZ\": \"3rd Person (he leaves)\",\r\n            \"VBD\": \"Past Tense (slept)\",\r\n            \"VBG\": \"Gerund (crying)\",\r\n            \"VBN\": \"Past Participle (eaten)\",\r\n            \"VBP\": \"Present (I walk)\"\r\n        };\r\n        for (let tense in verbTenseMap) {\r\n            if (type.startsWith(tense)) {\r\n                let remainder = type.substring(tense.length);\r\n                let category = \"\";\r\n                if (remainder.startsWith(\"_\")) {\r\n                    category = remainder.substring(1);\r\n                }\r\n                return category\r\n                    ? Utils.toTitleCase(category) + \" Verb (\" + verbTenseMap[tense] + \")\"\r\n                    : \"Verb (\" + verbTenseMap[tense] + \")\";\r\n            }\r\n        }\r\n        if (type.startsWith(\"VB\")) {\r\n            let rest = type.substring(2).replace(/^_+/, \"\");\r\n            return rest ? Utils.toTitleCase(rest) + \" Verb (Base Form)\" : \"Verb (Base Form)\";\r\n        }\r\n        if (type.startsWith(\"JJ_\")) {\r\n            let sub = type.substring(3);\r\n            return Utils.toTitleCase(Utils.naturalDisplay(sub));\r\n        }\r\n        if (type.startsWith(\"JJS_\")) {\r\n            let sub = type.substring(4);\r\n            if (sub.toLowerCase() === \"ordinal\") {\r\n                return \"Ordinal Number\";\r\n            }\r\n            return Utils.toTitleCase(Utils.naturalDisplay(sub)) + \" Superlative Adjective\";\r\n        }\r\n        if (type === \"JJ\") return \"Adjective\";\r\n        if (type === \"JJR\") return \"Comparative Adjective\";\r\n        if (type === \"JJS\") return \"Superlative Adjective\";\r\n        if (type === \"RB\") return \"Adverb\";\r\n        if (type === \"RBR\") return \"Comparative Adverb\";\r\n        if (type === \"RBS\") return \"Superlative Adverb\";\r\n        if (type === \"WRB\") return \"WH-adverb\";\r\n        if (type === \"CC\") return \"Coordinating Conjunction\";\r\n        if (type === \"PDT\") return \"Pre-determiner\";\r\n        if (type === \"WDT\") return \"WH-determiner\";\r\n        if (type === \"FW\") return \"Foreign Word\";\r\n        if (type === \"Number\") return \"Number\";\r\n        if (type === \"Exclamation\") return \"Exclamation\";\r\n        return type;\r\n    },\r\n    getTooltipForType: (type) => {\r\n        const normalizedType = type.trim().toLowerCase();\r\n        for (let category in allPlaceholders) {\r\n            for (let p of allPlaceholders[category]) {\r\n                if (p.internalType.trim().toLowerCase() === normalizedType) {\r\n                    return p.tooltip;\r\n                }\r\n            }\r\n        }\r\n        const verbTensePrefixes = [\"VBZ\", \"VBD\", \"VBG\", \"VBN\", \"VBP\"];\r\n        for (let prefix of verbTensePrefixes) {\r\n            if (normalizedType.startsWith(prefix.toLowerCase() + \"_\")) {\r\n                const baseType = \"vb_\" + normalizedType.substring(prefix.length + 1);\r\n                for (let category in allPlaceholders) {\r\n                    for (let p of allPlaceholders[category]) {\r\n                        if (p.internalType.trim().toLowerCase() === baseType) {\r\n                            return p.tooltip;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return \"No additional info available.\";\r\n    },\r\n    getOriginalDisplayForType: (type) => {\r\n        for (let category in allPlaceholders) {\r\n            for (let p of allPlaceholders[category]) {\r\n                if (p.internalType === type) {\r\n                    return p.display;\r\n                }\r\n            }\r\n        }\r\n        return type.startsWith(\"NN\") ? TypeHelpers.naturalizeType(type) : type;\r\n    },\r\n    guessTypeFromId: (id) => {\r\n        let base = id.replace(/\\d+$/, '');\r\n        const custom = state.customPlaceholders.find(p => p.type === base);\r\n        if (custom) return custom.type;\r\n        const pronounFixedRe = /^PRP(\\d+)(SUB|OBJ|PSA|PSP|REF)$/;\r\n        if (pronounFixedRe.test(id)) {\r\n            const match = id.match(pronounFixedRe);\r\n            const groupNum = match[1];\r\n            const abbrev = match[2];\r\n            const formMapReverse = { SUB: \"subject\", OBJ: \"object\", PSA: \"possAdj\", PSP: \"possPron\", REF: \"reflexive\" };\r\n            return `PRONOUN|PronounGroup${groupNum}|${formMapReverse[abbrev]}`;\r\n        }\r\n        const pronounRe = /^([A-Za-z0-9]+)_(subject|object|possAdj|possPron|reflexive)$/;\r\n        if (pronounRe.test(base)) {\r\n            const m = base.match(pronounRe);\r\n            return `PRONOUN|${m[1]}|${m[2]}`;\r\n        }\r\n        return TypeHelpers.naturalizeType(base);\r\n    },\r\n    getNounFinalType: (baseInternal, number) => {\r\n        let baseTag = \"\", extra = \"\";\r\n        if (baseInternal.indexOf(\"_\") !== -1) {\r\n            const parts = baseInternal.split(\"_\");\r\n            baseTag = parts[0];\r\n            extra = parts.slice(1).join(\"_\");\r\n        } else {\r\n            baseTag = baseInternal;\r\n        }\r\n        let finalTag = baseTag === \"NN\" ? (number === \"Singular\" ? \"NN\" : \"NNS\")\r\n            : baseTag === \"NNP\" ? (number === \"Singular\" ? \"NNP\" : \"NNPS\")\r\n                : (number === \"Singular\" ? baseTag : baseTag + \"S\");\r\n        return extra ? finalTag + \"_\" + extra : finalTag;\r\n    },\r\n    computeFinalVerbType: (baseInternal, tenseTag) => {\r\n        if (baseInternal === \"MD\") return \"MD_\" + tenseTag;\r\n        const parts = baseInternal.split(\"_\");\r\n        const baseCategory = parts.slice(1).join(\"_\");\r\n        return baseCategory ? tenseTag + \"_\" + baseCategory : tenseTag;\r\n    }\r\n};","// public/js/utils/utils.js\r\n\r\nexport const Utils = {\r\n  debounce: (func, delay) => {\r\n    let timeout;\r\n    return function(...args) {\r\n      const context = this;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(() => func.apply(context, args), delay);\r\n    };\r\n  },\r\n  toTitleCase: (str) =>\r\n    str.replace(/\\w\\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()),\r\n  capitalize: (str) => str.charAt(0).toUpperCase() + str.slice(1).toLowerCase(),\r\n  pascalCase: (str) => str.toLowerCase().split(/\\s+/).map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(''),\r\n  naturalDisplay: (str) => str.replace(/([a-z])([A-Z])/g, '$1 $2'),\r\n  sanitizeString: (str) => str.replace(/[^a-zA-Z0-9_]/g, '')\r\n};\r\n\r\nexport const decodeHTMLEntities = (text) => {\r\nconst textarea = document.createElement(\"textarea\");\r\ntextarea.innerHTML = text;\r\nreturn textarea.value;\r\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// public/js/main.js\r\nimport state, { resetState } from './core/state.js';\r\nimport { initEvents } from './handlers/events.js';\r\nimport { initMenuSystem } from './ui/menu.js';\r\nimport { Storage } from './data/storage.js';\r\n\r\n(function () {\r\n  \"use strict\";\r\n  \r\n  // Initialize the application\r\n  $(document).ready(() => {\r\n    // Initialize UI components\r\n    initMenuSystem();\r\n    \r\n    // Attach event handlers\r\n    initEvents();\r\n    \r\n    // Load saved stories if the user is logged in\r\n    if ($('#userLoggedIn').val() === 'true') {\r\n      Storage.loadSavedStoriesList();\r\n    }\r\n    \r\n    // Show the main view\r\n    $('#editor').removeClass('d-none');\r\n    \r\n    console.log('Application initialized successfully');\r\n  });\r\n})();"],"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","_catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","state","Utils","TypeHelpers","categoryOrder","allPlaceholders","internalType","display","tooltip","icon","isPrimary","VERB_TENSES","text","insertNodeAtCaret","node","range","deleteContents","insertNode","newRange","document","createRange","setStartAfter","collapse","sel","window","getSelection","removeAllRanges","addRange","rangeCount","getRangeAt","ensureEditorFocus","editor","getElementById","contains","anchorNode","focus","selectNodeContents","insertPlaceholderSpan","placeholderID","displayText","span","createElement","className","setAttribute","textContent","endsWith","parentNode","nextNode","nextSibling","nodeType","Node","TEXT_NODE","test","insertBefore","createTextNode","appendChild","duplicatePlaceholder","variable","usageTracker","id","newId","rangeToUse","lastRange","commonAncestorContainer","displayOverride","officialDisplay","insertPlaceholder","_ref","_callee","isCustom","sanitized","spans","max","newCount","selectedText","_yield$Swal$fire","temp","_callee$","_context","sanitizeString","querySelectorAll","getAttribute","startsWith","match","num","parseInt","variableCounts","collapsed","toString","trim","Swal","fire","title","input","inputLabel","inputValue","showCancelButton","variables","some","order","insertionCounter","updateVariablesList","concat","confirmButtonText","cancelButtonText","result","isConfirmed","applyPlaceholderToAllOccurrences","_x","_x2","_x3","textNodes","getTextNodes","includes","childNodes","child","classList","content","parts","split","parent","fragment","createDocumentFragment","j","replaceChild","updateVariablesFromEditor","addNewCustomPlaceholderWithUsage","rawText","usage","internal","pascalCase","customPlaceholders","addNewCustomPlaceholder","insertPlaceholderFromCustom","naturalDisplay","container","innerHTML","sort","b","btn","insertPronounPlaceholderSimple","groupId","form","tempValue","groupNum","replace","formAbbrevMap","subject","object","possAdj","possPron","reflexive","abbrev","toUpperCase","placeholderId","displayType","placeholderElements","el","base","numMatch","variableEntry","custom","find","naturalizeType","guessed","guessTypeFromId","originalDisplay","getOriginalDisplayForType","currentSearch","$","val","updatePlaceholderAccordion","currentModalSearch","generateLegacyText","traverse","ELEMENT_NODE","tagName","toLowerCase","tag","accordionSelector","noResultsSelector","searchVal","undefined","hide","accordion","empty","categoryName","placeholders","categoryCard","createPlaceholderCategoryCard","append","customCard","createCustomPlaceholderCategoryCard","anyShown","toggle","show","sanitizedCategoryName","card","createCardHeader","collapseDiv","primaryItems","filter","secondaryItems","appendPlaceholderItem","secondaryPlaceholderWrapper","createSecondaryPlaceholderWrapper","createShowMoreToggle","updateShowMoreToggleVisibility","showItem","item","hiddenWrapper","toggleLink","anySecondaryVisible","listGroup","placeholder","isSecondary","showPersonTypeSelection","baseInternal","baseDisplay","html","showConfirmButton","allowOutsideClick","didOpen","getHtmlContainer","on","selectedType","data","updatedBaseInternal","updatedBaseDisplay","close","setTimeout","showNounNumberSelection","_callee2","selected","finalInternal","finalDisplay","_callee2$","_context2","getNounFinalType","isEditingPlaceholder","currentEditingVariable","updateExistingPlaceholder","showVerbTenseSelection","_callee3","selectedTense","tenseText","_callee3$","_context3","computeFinalVerbType","newInternalType","newDisplayName","pickPronounFormAndGroup","forms","chosenForm","pickPronounGroup","groupKeys","pronounGroups","grp","choosePronounTempValue","pronounMapping","pronounGroupCount","newGroup","inputOptions","inputValidator","res","storyText","fillValues","placeholderInsertionInProgress","storyHasUnsavedChanges","fillOrder","currentStoryId","currentPlaceholderSearch","currentModalPlaceholderSearch","currentPlaceholderElement","resetState","fillPlaceholders","templateText","finalText","_iterator","_createForOfIteratorHelper","_step","phRegex","RegExp","groupObj","userVal","err","parseStoryFile","titleMatch","authorMatch","storyStartIndex","indexOf","storyContent","substring","author","formatStoryForExport","createFilenameFromTitle","resetStoryState","removeClass","addClass","loadStoryIntoEditor","storyData","tags","join","Storage","handleAjaxError","xhr","statusText","errorThrown","customErrorMessage","errorMessage","status","console","error","addCurrentStoryToSavedStories","story","storyTitle","storyAuthor","map","savedAt","Date","toISOString","password","ajax","url","contentType","JSON","stringify","success","toast","position","timer","storyWithOverwrite","overwrite","xhrOverwrite","statusTextOverwrite","errorThrownOverwrite","addCompletedStoryToSavedStories","loadSavedStoriesList","encodeURIComponent","stories","savedStories","$listContainer","index","dateObj","dateStr","toLocaleDateString","toLocaleTimeString","ratingDisplay","ratingCount","rating","toFixed","lockIndicator","locked","createSavedStoryListItem","loadSavedStory","mode","inputPlaceholder","inputAttributes","autocapitalize","autocorrect","storyId","_id","unlockedStory","populateEditorWithStory","decodeHTMLEntities","buildFillForm","deleteSavedStory","validateInputForm","domUtils","initEvents","stopPropagation","currentTarget","getTooltipForType","showToast","parentList","closest","hiddenItems","link","copyTextToClipboard","addEventListener","debounce","autocomplete","source","request","response","dataType","filteredTags","ui","term","minLength","select","event","click","copyToClipboard","showError","file","files","reader","FileReader","onload","target","readAsText","handleGenerateStory","handleCreateNewStory","handleSaveStoryToSite","fileName","downloadTextFile","modal","confirmDialog","key","anchorOffset","nodeValue","preventDefault","setStartBefore","raw","stopImmediatePropagation","hasClass","handlePlaceholderClick","showDenyButton","denyButtonText","isDenied","final","loadPreexistingTags","preConfirm","current","tagsArr","Boolean","appendPronounGroupsToForm","appendNonPronounVariablesToForm","groupSet","getPronounGroups","sortedGroups","Array","from","localeCompare","block","createPronounGroupBlock","handlePronounChoiceChange","Set","add","groupName","radios","attr","nonPronounVars","Math","random","groupRow","createInputRow","formData","valid","message","selectionMenu","placeholderEditMenu","positionMenu","menu","rect","style","menuWidth","offsetWidth","menuHeight","offsetHeight","offset","desiredTop","bottom","innerHeight","scrollY","top","desiredLeft","scrollX","left","width","min","innerWidth","hideMenu","hideAllMenus","resetCurrentEditing","initMenus","assign","zIndex","background","border","padding","borderRadius","boxShadow","body","attachMenuEventListeners","handleTextSelection","getBoundingClientRect","handleDeletePlaceholder","remove","handleEditPlaceholder","handleEditOverride","newOverride","handleNewPlaceholder","handleReusePlaceholder","sortedVariables","_toConsumableArray","btns","button","getSelectionMenu","getPlaceholderEditMenu","initMenuSystem","isArray","_unsupportedIterableToArray","_n","F","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arrayLikeToArray","ownKeys","getOwnPropertySymbols","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_toPrimitive","toPrimitive","String","Number","options","defaultOptions","finalOptions","timerProgressBar","toggleVisibility","selector","isVisible","element","querySelector","toggleClass","shouldAdd","showView","viewName","attributes","children","_i","_Object$entries","entries","_Object$entries$_i","eventName","getElementValue","defaultValue","checked","checkedEl","setElementValue","radio","getFormData","formSelector","FormData","_step$value","clearForm","reject","navigator","clipboard","writeText","fallbackCopyTextToClipboard","textarea","successful","execCommand","removeChild","filename","blob","Blob","URL","createObjectURL","href","download","revokeObjectURL","t0","sub","toTitleCase","tense","tenseNatural","verbTenseMap","remainder","category","rest","normalizedType","verbTensePrefixes","_verbTensePrefixes","prefix","baseType","_iterator2","_step2","_iterator3","_step3","pronounFixedRe","formMapReverse","SUB","OBJ","PSA","PSP","REF","pronounRe","m","number","baseTag","extra","finalTag","tenseTag","baseCategory","func","delay","timeout","_len","args","_key","context","clearTimeout","str","txt","substr","capitalize","word","ready","log"],"sourceRoot":""}