<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mad Libs Game</title>
  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
</head>
<body>

<h1 class="text-center my-4">Mad Libs Game</h1>

<div id="editor">
  <h2>Create Your Story</h2>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="storyTitle">Story Title</label>
      <input
        type="text"
        class="form-control form-control-sm"
        id="storyTitle"
        placeholder="Enter story title"
      >
    </div>
    <div class="form-group col-md-6">
      <label for="storyAuthor">Author</label>
      <input
        type="text"
        class="form-control form-control-sm"
        id="storyAuthor"
        placeholder="Enter author name"
      >
    </div>
  </div>
  <p>
    Write your story below. Use placeholders (like <code>{Noun1}</code>)
    or insert them via the panel/button.
  </p>
  <div class="row">
    <div class="col-md-8">
      <div class="form-group" style="position: relative;">
        <textarea
          id="storyText"
          class="form-control form-control-sm"
          placeholder="Start writing your story here..."
        ></textarea>
      </div>
      <div class="my-3">
        <button class="btn btn-primary btn-sm" id="addPlaceholderBtn">
          <i class="fas fa-plus"></i> Add Placeholder
        </button>
        <div id="variables" class="mt-3">
          <label for="existingPlaceholders">Existing Placeholders:</label>
          <select id="existingPlaceholders" class="form-control form-control-sm">
            <option value="">-- Select Placeholder --</option>
          </select>
        </div>
      </div>
      <div class="my-3">
        <input type="file" id="uploadStory" accept=".txt" style="display:none;">
        <button id="uploadStoryBtn" class="btn btn-secondary btn-sm">
          <i class="fas fa-upload"></i> Upload Saved Story
        </button>
        <button id="saveStory" class="btn btn-info btn-sm">
          <i class="fas fa-save"></i> Save Story
        </button>
        <button id="startGame" class="btn btn-success btn-sm">
          <i class="fas fa-play"></i> Start Game
        </button>
      </div>
    </div>
    <div class="col-md-4" id="sidePlaceholderPanel" style="display:none;">
      <h5>Available Placeholders</h5>
      <hr>
      <div class="form-group sticky-search-bar">
        <input
          type="text"
          class="form-control form-control-sm"
          id="placeholderSearch"
          placeholder="Search..."
        >
      </div>
      <div id="noResults">
        <button id="addCustomPlaceholderBtn" class="btn btn-outline-primary btn-sm mb-2">
          <i class="fas fa-plus-circle"></i>
          Add "<span id="searchQueryBtn"></span>"
        </button>
        <p>No placeholders found for "<span id="searchQuery"></span>".</p>
      </div>
      <div id="placeholderAccordion" class="accordion"></div>
    </div>
  </div>
</div>

<!-- Modal for picking placeholders on smaller screens -->
<div class="modal fade" id="placeholderModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Placeholder</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <input
            type="text"
            class="form-control form-control-sm"
            id="modalPlaceholderSearch"
            placeholder="Search..."
          >
        </div>
        <div id="modalNoResults">
          <button
            id="modalAddCustomPlaceholderBtn"
            class="btn btn-outline-primary btn-sm mb-2"
          >
            <i class="fas fa-plus-circle"></i>
            Add "<span id="modalSearchQueryBtn"></span>"
          </button>
          <p>No placeholders found for "<span id="modalSearchQuery"></span>".</p>
        </div>
        <div id="modalPlaceholderAccordion"></div>
      </div>
    </div>
  </div>
</div>

<div id="inputs" style="display:none;">
  <h2>Fill in the Blanks</h2>
  <form id="inputForm"></form>
  <button id="backToEditor" class="btn btn-secondary btn-sm">
    <i class="fas fa-arrow-left"></i> Edit Story
  </button>
  <button id="createNewStory" class="btn btn-danger btn-sm">
    <i class="fas fa-redo-alt"></i> Create New Story
  </button>
  <button id="generateStory" class="btn btn-success btn-sm float-right">
    <i class="fas fa-check"></i> Generate Story
  </button>
</div>

<div id="result" style="display:none;">
  <h2>Your Completed Story:</h2>
  <h3 id="displayTitle"></h3>
  <p><em>by <span id="displayAuthor"></span></em></p>
  <div id="finalStory"></div>

  <div id="finalButtons" >
    <button id="editStoryEntries" class="btn btn-warning btn-sm">
      <i class="fas fa-edit"></i> Edit Story Entries
    </button>
    <button id="backToEditor2" class="btn btn-secondary btn-sm">
      <i class="fas fa-arrow-left"></i> Edit Story
    </button>
    <button id="createNewStory2" class="btn btn-danger btn-sm">
      <i class="fas fa-redo-alt"></i> Create New Story
    </button>
    <button id="saveCompletedStory" class="btn btn-info float-right btn-sm">
      <i class="fas fa-save"></i> Save Completed Story
    </button>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"
></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="main.js"></script>

</body>
</html>